!function(){"use strict";var e={890:function(e){var t,r,o=Object.create,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,n=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,p=(e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})},d=(e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of a(t))c.call(e,n)||n===r||i(e,n,{get:()=>t[n],enumerable:!(o=s(t,n))||o.enumerable});return e},l=(t={"../../node_modules/iso-datestring-validator/dist/index.js"(e){(()=>{var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function o(e,t){return void 0===t&&(t="-"),new RegExp("^(?!0{4}"+t+"0{2}"+t+"0{2})((?=[0-9]{4}"+t+"(((0[^2])|1[0-2])|02(?="+t+"(([0-1][0-9])|2[0-8])))"+t+"[0-9]{2})|(?=((([13579][26])|([2468][048])|(0[48]))0{2})|([0-9]{2}((((0|[2468])[48])|[2468][048])|([13579][26])))"+t+"02"+t+"29))([0-9]{4})"+t+"(?!((0[469])|11)"+t+"31)((0[1,3-9]|1[0-2])|(02(?!"+t+"3)))"+t+"(0[1-9]|[1-2][0-9]|3[0-1])$").test(e)}function i(e){var t=/\D/.exec(e);return t?t[0]:""}function s(e,t,r){void 0===t&&(t=":"),void 0===r&&(r=!1);var o=new RegExp("^([0-1]|2(?=([0-3])|4"+t+"00))[0-9]"+t+"[0-5][0-9]("+t+"([0-5]|6(?=0))[0-9])?(.[0-9]{1,9})?$");if(!r||!/[Z+\-]/.test(e))return o.test(e);if(/Z$/.test(e))return o.test(e.replace("Z",""));var s,a,n,c=e.includes("+"),p=e.split(/[+-]/),d=p[0],l=p[1];return o.test(d)&&(s=l,a=c,void 0===(n=i(l))&&(n=":"),new RegExp(a?"^(0(?!(2"+n+"4)|0"+n+"3)|1(?=([0-1]|2(?="+n+"[04])|[34](?="+n+"0))))([03469](?="+n+"[03])|[17](?="+n+"0)|2(?="+n+"[04])|5(?="+n+"[034])|8(?="+n+"[04]))"+n+"([03](?=0)|4(?=5))[05]$":"^(0(?=[^0])|1(?=[0-2]))([39](?="+n+"[03])|[0-24-8](?="+n+"00))"+n+"[03]0$").test(s))}function a(e){var t=e.split("T"),r=t[0],a=t[1],n=o(r,i(r));if(!a)return!1;var c,p=(c=a.match(/([^Z+\-\d])(?=\d+\1)/),Array.isArray(c)?c[0]:"");return n&&s(a,p,!0)}function n(e,t){return void 0===t&&(t="-"),new RegExp("^[0-9]{4}"+t+"(0(?=[^0])|1(?=[0-2]))[0-9]$").test(e)}t.r(r),t.d(r,{isValidDate:()=>o,isValidISODateString:()=>a,isValidTime:()=>s,isValidYearMonth:()=>n});var c=e;for(var p in r)c[p]=r[p];r.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})})()}},function(){return r||(0,t[a(t)[0]])((r={exports:{}}).exports,r),r.exports}),u={};p(u,{ActorNS:()=>$l,AdminNS:()=>kl,AppBskyActorDefs:()=>$p,AppBskyActorGetProfile:()=>gn,AppBskyActorGetProfiles:()=>vn,AppBskyActorGetSuggestions:()=>xn,AppBskyActorProfile:()=>Lp,AppBskyActorSearchActors:()=>An,AppBskyActorSearchActorsTypeahead:()=>Sn,AppBskyEmbedExternal:()=>Zp,AppBskyEmbedImages:()=>Qp,AppBskyEmbedRecord:()=>nd,AppBskyEmbedRecordWithMedia:()=>bd,AppBskyFeedDefs:()=>Ad,AppBskyFeedGetAuthorFeed:()=>Cn,AppBskyFeedGetLikes:()=>In,AppBskyFeedGetPostThread:()=>Vn,AppBskyFeedGetPosts:()=>On,AppBskyFeedGetRepostedBy:()=>Mn,AppBskyFeedGetTimeline:()=>Zn,AppBskyFeedLike:()=>Ld,AppBskyFeedPost:()=>Zd,AppBskyFeedRepost:()=>Qd,AppBskyGraphBlock:()=>tl,AppBskyGraphFollow:()=>il,AppBskyGraphGetBlocks:()=>Gn,AppBskyGraphGetFollowers:()=>Kn,AppBskyGraphGetFollows:()=>Hn,AppBskyGraphGetMutes:()=>Xn,AppBskyGraphMuteActor:()=>Yn,AppBskyGraphUnmuteActor:()=>tc,AppBskyNotificationGetUnreadCount:()=>oc,AppBskyNotificationListNotifications:()=>sc,AppBskyNotificationUpdateSeen:()=>pc,AppBskyRichtextFacet:()=>nl,AppBskyUnspeccedGetPopular:()=>lc,AppNS:()=>El,AtUri:()=>no,AtpAgent:()=>Gl,AtpBaseClient:()=>bl,AtpServiceClient:()=>vl,AtprotoNS:()=>xl,BlobRef:()=>ri,BlockRecord:()=>Ol,BskyAgent:()=>au,BskyNS:()=>Tl,COM_ATPROTO_ADMIN:()=>hl,COM_ATPROTO_MODERATION:()=>gl,ComAtprotoAdminDefs:()=>mc,ComAtprotoAdminDisableInviteCodes:()=>qi,ComAtprotoAdminGetInviteCodes:()=>Pi,ComAtprotoAdminGetModerationAction:()=>Ni,ComAtprotoAdminGetModerationActions:()=>Oi,ComAtprotoAdminGetModerationReport:()=>Mi,ComAtprotoAdminGetModerationReports:()=>Zi,ComAtprotoAdminGetRecord:()=>Gi,ComAtprotoAdminGetRepo:()=>Ki,ComAtprotoAdminResolveModerationReports:()=>Hi,ComAtprotoAdminReverseModerationAction:()=>Xi,ComAtprotoAdminSearchRepos:()=>Yi,ComAtprotoAdminTakeModerationAction:()=>ts,ComAtprotoAdminUpdateAccountEmail:()=>is,ComAtprotoAdminUpdateAccountHandle:()=>as,ComAtprotoIdentityResolveHandle:()=>cs,ComAtprotoIdentityUpdateHandle:()=>ds,ComAtprotoLabelDefs:()=>Hc,ComAtprotoLabelQueryLabels:()=>us,ComAtprotoLabelSubscribeLabels:()=>Qc,ComAtprotoModerationCreateReport:()=>ys,ComAtprotoModerationDefs:()=>op,ComAtprotoRepoApplyWrites:()=>hs,ComAtprotoRepoCreateRecord:()=>Rs,ComAtprotoRepoDeleteRecord:()=>Ts,ComAtprotoRepoDescribeRepo:()=>qs,ComAtprotoRepoGetRecord:()=>Ps,ComAtprotoRepoListRecords:()=>Ns,ComAtprotoRepoPutRecord:()=>Ms,ComAtprotoRepoStrongRef:()=>dp,ComAtprotoRepoUploadBlob:()=>zs,ComAtprotoServerCreateAccount:()=>Fs,ComAtprotoServerCreateAppPassword:()=>Ys,ComAtprotoServerCreateInviteCode:()=>ia,ComAtprotoServerCreateInviteCodes:()=>aa,ComAtprotoServerCreateSession:()=>da,ComAtprotoServerDefs:()=>mp,ComAtprotoServerDeleteAccount:()=>ma,ComAtprotoServerDeleteSession:()=>ga,ComAtprotoServerDescribeServer:()=>va,ComAtprotoServerGetAccountInviteCodes:()=>Aa,ComAtprotoServerGetSession:()=>Sa,ComAtprotoServerListAppPasswords:()=>Ca,ComAtprotoServerRefreshSession:()=>qa,ComAtprotoServerRequestAccountDelete:()=>Va,ComAtprotoServerRequestPasswordReset:()=>Ba,ComAtprotoServerResetPassword:()=>La,ComAtprotoServerRevokeAppPassword:()=>za,ComAtprotoSyncGetBlob:()=>Fa,ComAtprotoSyncGetBlocks:()=>Wa,ComAtprotoSyncGetCheckout:()=>Ja,ComAtprotoSyncGetCommitPath:()=>Qa,ComAtprotoSyncGetHead:()=>en,ComAtprotoSyncGetRecord:()=>rn,ComAtprotoSyncGetRepo:()=>sn,ComAtprotoSyncListBlobs:()=>nn,ComAtprotoSyncListRepos:()=>pn,ComAtprotoSyncNotifyOfUpdate:()=>mn,ComAtprotoSyncRequestCrawl:()=>fn,ComAtprotoSyncSubscribeRepos:()=>bp,ComNS:()=>wl,EmbedNS:()=>ql,FeedNS:()=>Dl,FollowRecord:()=>Ll,GraphNS:()=>Bl,IdentityNS:()=>Al,LabelNS:()=>_l,LikeRecord:()=>Pl,ModerationNS:()=>jl,NotificationNS:()=>Ml,PostRecord:()=>Vl,ProfileRecord:()=>Il,RepoNS:()=>Sl,RepostRecord:()=>Nl,RichText:()=>ou,RichTextSegment:()=>ru,RichtextNS:()=>Ul,ServerNS:()=>Rl,SyncNS:()=>Cl,UnicodeString:()=>Hl,UnspeccedNS:()=>Zl,default:()=>Gl,jsonStringToLex:()=>bi,jsonToLex:()=>gi,lexToJson:()=>fi,sanitizeRichText:()=>Ql,stringifyLex:()=>hi}),e.exports=(e=>d(i({},"__esModule",{value:!0}),e))(u);var m={};p(m,{assure:()=>f,is:()=>y,isObject:()=>h});var y=(e,t)=>t.safeParse(e).success,f=(e,t)=>e.parse(t),h=e=>"object"==typeof e&&null!==e,g=128,b=-128,v=Math.pow(2,31),w=128,x=127,k=Math.pow(2,7),A=Math.pow(2,14),_=Math.pow(2,21),j=Math.pow(2,28),S=Math.pow(2,35),R=Math.pow(2,42),C=Math.pow(2,49),E=Math.pow(2,56),T=Math.pow(2,63),$={encode:function e(t,r,o){r=r||[];for(var i=o=o||0;t>=v;)r[o++]=255&t|g,t/=128;for(;t&b;)r[o++]=255&t|g,t>>>=7;return r[o]=0|t,e.bytes=o-i+1,r},decode:function e(t,r){var o,i=0,s=0,a=r=r||0,n=t.length;do{if(a>=n)throw e.bytes=0,new RangeError("Could not decode varint");o=t[a++],i+=s<28?(o&x)<<s:(o&x)*Math.pow(2,s),s+=7}while(o>=w);return e.bytes=a-r,i},encodingLength:function(e){return e<k?1:e<A?2:e<_?3:e<j?4:e<S?5:e<R?6:e<C?7:e<E?8:e<T?9:10}},I=(e,t=0)=>[$.decode(e,t),$.decode.bytes],q=(e,t,r=0)=>($.encode(e,t,r),t),D=e=>$.encodingLength(e),P=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}),V=(e,t)=>{const r=t.byteLength,o=D(e),i=o+D(r),s=new Uint8Array(i+r);return q(e,s,0),q(r,s,o),s.set(t,i),new N(e,r,t,s)},N=class{constructor(e,t,r,o){this.code=e,this.size=t,this.digest=r,this.bytes=o}},B={};p(B,{base58btc:()=>Z,base58flickr:()=>z});var O=(e,t)=>new class{constructor(e){this.decoders=e}or(e){return O(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),L=({name:e,prefix:t,encode:r,decode:o})=>new class{constructor(e,t,r,o){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=o,this.encoder=new class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}(e,t,r),this.decoder=new class{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return O(this,e)}}(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}(e,t,r,o),M=({prefix:e,name:t,alphabet:r})=>{const{encode:o,decode:i}=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw new TypeError(s+" is ambiguous");r[a]=i}var n=e.length,c=e.charAt(0),p=Math.log(n)/Math.log(256),d=Math.log(256)/Math.log(n);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var o=0,i=0;e[t]===c;)o++,t++;for(var s=(e.length-t)*p+1>>>0,a=new Uint8Array(s);e[t];){var d=r[e.charCodeAt(t)];if(255===d)return;for(var l=0,u=s-1;(0!==d||l<i)&&-1!==u;u--,l++)d+=n*a[u]>>>0,a[u]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var m=s-i;m!==s&&0===a[m];)m++;for(var y=new Uint8Array(o+(s-m)),f=o;m!==s;)y[f++]=a[m++];return y}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,o=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*d+1>>>0,p=new Uint8Array(a);i!==s;){for(var l=t[i],u=0,m=a-1;(0!==l||u<o)&&-1!==m;m--,u++)l+=256*p[m]>>>0,p[m]=l%n>>>0,l=l/n>>>0;if(0!==l)throw new Error("Non-zero carry");o=u,i++}for(var y=a-o;y!==a&&0===p[y];)y++;for(var f=c.repeat(r);y<a;++y)f+=e.charAt(p[y]);return f},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}}(r,t);return L({prefix:e,name:t,encode:o,decode:e=>P(i(e))})},U=({name:e,prefix:t,bitsPerChar:r,alphabet:o})=>L({prefix:t,name:e,encode(e){return((e,t,r)=>{const o="="===t[t.length-1],i=(1<<r)-1;let s="",a=0,n=0;for(let o=0;o<e.length;++o)for(n=n<<8|e[o],a+=8;a>r;)a-=r,s+=t[i&n>>a];if(a&&(s+=t[i&n<<r-a]),o)for(;s.length*r&7;)s+="=";return s})(e,o,r)},decode(t){return((e,t,r,o)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const a=new Uint8Array(s*r/8|0);let n=0,c=0,p=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${o} character`);c=c<<r|s,n+=r,n>=8&&(n-=8,a[p++]=255&c>>n)}if(n>=r||255&c<<8-n)throw new SyntaxError("Unexpected end of data");return a})(t,o,r,e)}}),Z=M({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),z=M({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),G={};p(G,{base32:()=>F,base32hex:()=>J,base32hexpad:()=>Q,base32hexpadupper:()=>Y,base32hexupper:()=>X,base32pad:()=>W,base32padupper:()=>H,base32upper:()=>K,base32z:()=>ee});var F=U({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),K=U({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),W=U({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),H=U({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),J=U({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),X=U({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Q=U({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Y=U({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ee=U({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),te=class{constructor(e,t,r,o){this.code=t,this.version=e,this.multihash=r,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:de,byteLength:de,code:pe,version:pe,multihash:pe,bytes:pe,_baseCache:de,asCID:de})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==se)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ae)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return te.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=V(e,t);return te.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&((t=this.multihash)===(r=e.multihash)||t.code===r.code&&t.size===r.size&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(t.bytes,r.bytes));var t,r}toString(e){const{bytes:t,version:r,_baseCache:o}=this;return 0===r?oe(t,o,e||Z.encoder):ie(t,o,e||F.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return le(/^0\.0/,ue),!(!e||!e[ce]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof te)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:o,bytes:i}=e;return new te(t,r,o,i||ne(t,r,o.bytes))}if(null!=e&&!0===e[ce]){const{version:t,multihash:r,code:o}=e,i=(e=>{const t=P(e),[r,o]=I(t),[i,s]=I(t.subarray(o)),a=t.subarray(o+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new N(r,i,a,t)})(r);return te.create(t,o,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==se)throw new Error(`Version 0 CID must use dag-pb (code: ${se}) block encoding`);return new te(e,t,r,r.bytes);case 1:{const o=ne(e,t,r.bytes);return new te(e,t,r,o)}default:throw new Error("Invalid version")}}static createV0(e){return te.create(0,se,e)}static createV1(e,t){return te.create(1,e,t)}static decode(e){const[t,r]=te.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=te.inspectBytes(e),r=t.size-t.multihashSize,o=P(e.subarray(r,r+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),s=new N(t.multihashCode,t.digestSize,i,o);return[0===t.version?te.createV0(s):te.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,o]=I(e.subarray(t));return t+=o,r};let o=r(),i=se;if(18===o?(o=0,t=0):1===o&&(i=r()),0!==o&&1!==o)throw new RangeError(`Invalid CID version ${o}`);const s=t,a=r(),n=r(),c=t+n;return{version:o,codec:i,multihashCode:a,digestSize:n,multihashSize:c-s,size:c}}static parse(e,t){const[r,o]=re(e,t),i=te.decode(o);return i._baseCache.set(r,e),i}},re=(e,t)=>{switch(e[0]){case"Q":{const r=t||Z;return[Z.prefix,r.decode(`${Z.prefix}${e}`)]}case Z.prefix:{const r=t||Z;return[Z.prefix,r.decode(e)]}case F.prefix:{const r=t||F;return[F.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},oe=(e,t,r)=>{const{prefix:o}=r;if(o!==Z.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(o);if(null==i){const i=r.encode(e).slice(1);return t.set(o,i),i}return i},ie=(e,t,r)=>{const{prefix:o}=r,i=t.get(o);if(null==i){const i=r.encode(e);return t.set(o,i),i}return i},se=112,ae=18,ne=(e,t,r)=>{const o=D(e),i=o+D(t),s=new Uint8Array(i+r.byteLength);return q(e,s,0),q(t,s,o),s.set(r,i),s},ce=Symbol.for("@ipld/js-cid/CID"),pe={writable:!1,configurable:!1,enumerable:!0},de={writable:!1,enumerable:!1,configurable:!1},le=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},ue="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",me={};p(me,{identity:()=>ye});var ye=L({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),fe={};p(fe,{base2:()=>he});var he=U({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ge={};p(ge,{base8:()=>be});var be=U({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ve={};p(ve,{base10:()=>we});var we=M({prefix:"9",name:"base10",alphabet:"0123456789"}),xe={};p(xe,{base16:()=>ke,base16upper:()=>Ae});var ke=U({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ae=U({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),_e={};p(_e,{base36:()=>je,base36upper:()=>Se});var je=M({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Se=M({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Re={};p(Re,{base64:()=>Ce,base64pad:()=>Ee,base64url:()=>Te,base64urlpad:()=>$e});var Ce=U({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ee=U({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Te=U({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$e=U({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ie={};p(Ie,{base256emoji:()=>Ve});var qe=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),De=qe.reduce(((e,t,r)=>(e[r]=t,e)),[]),Pe=qe.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Ve=L({prefix:"ðŸš€",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+De[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Pe[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});p({},{sha256:()=>Le,sha512:()=>Me});var Ne=({name:e,code:t,encode:r})=>new Be(e,t,r),Be=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?V(this.code,t):t.then((e=>V(this.code,e)))}throw Error("Unknown type, must be binary type")}},Oe=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Le=Ne({name:"sha2-256",code:18,encode:Oe("SHA-256")}),Me=Ne({name:"sha2-512",code:19,encode:Oe("SHA-512")});p({},{identity:()=>Ze});var Ue=P,Ze={code:0,name:"identity",encode:Ue,digest:e=>V(0,Ue(e))},ze=(new TextEncoder,new TextDecoder,{...me,...fe,...ge,...ve,...xe,...G,..._e,...B,...Re,...Ie});function Ge(e,t,r,o){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:o}}}var Fe=Ge("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Ke=Ge("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),We={utf8:Fe,"utf-8":Fe,hex:ze.base16,latin1:Ke,ascii:Ke,binary:Ke,...ze};function He(e,t="utf8"){const r=We[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var Je,Xe,Qe=e=>{if(Array.isArray(e))return e.map((e=>Qe(e)));if(e&&"object"==typeof e){if("string"==typeof e.$link&&1===Object.keys(e).length)return te.parse(e.$link);if("string"==typeof e.$bytes&&1===Object.keys(e).length)return function(e,t="utf8"){const r=We[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}(e.$bytes,"base64");const t={};for(const r of Object.keys(e))t[r]=Qe(e[r]);return t}return e},Ye=e=>{if(Array.isArray(e))return e.map((e=>Ye(e)));if(e&&"object"==typeof e){if(e instanceof Uint8Array)return{$bytes:He(e,"base64")};if(te.asCID(e))return{$link:e.toString()};const t={};for(const r of Object.keys(e))t[r]=Ye(e[r]);return t}return e};(Xe=Je||(Je={})).assertEqual=e=>e,Xe.assertIs=function(e){},Xe.assertNever=function(_x){throw new Error},Xe.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},Xe.getValidEnumValues=e=>{const t=Xe.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(const o of t)r[o]=e[o];return Xe.objectValues(r)},Xe.objectValues=e=>Xe.objectKeys(e).map((function(t){return e[t]})),Xe.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},Xe.find=(e,t)=>{for(const r of e)if(t(r))return r},Xe.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,Xe.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},Xe.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t;var et=Je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tt=e=>{switch(typeof e){case"undefined":return et.undefined;case"string":return et.string;case"number":return isNaN(e)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"object":return Array.isArray(e)?et.array:null===e?et.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?et.promise:"undefined"!=typeof Map&&e instanceof Map?et.map:"undefined"!=typeof Set&&e instanceof Set?et.set:"undefined"!=typeof Date&&e instanceof Date?et.date:et.object;default:return et.unknown}},rt=Je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),ot=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},o=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(o);else if("invalid_return_type"===i.code)o(i.returnTypeError);else if("invalid_arguments"===i.code)o(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,o=0;for(;o<i.path.length;){const r=i.path[o];o===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],o++}}};return o(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Je.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):r.push(e(o));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};ot.create=e=>new ot(e);var it=(e,t)=>{let r;switch(e.code){case rt.invalid_type:r=e.received===et.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case rt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Je.jsonStringifyReplacer)}`;break;case rt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Je.joinValues(e.keys,", ")}`;break;case rt.invalid_union:r="Invalid input";break;case rt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Je.joinValues(e.options)}`;break;case rt.invalid_enum_value:r=`Invalid enum value. Expected ${Je.joinValues(e.options)}, received '${e.received}'`;break;case rt.invalid_arguments:r="Invalid function arguments";break;case rt.invalid_return_type:r="Invalid function return type";break;case rt.invalid_date:r="Invalid date";break;case rt.invalid_string:"object"==typeof e.validation?"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Je.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case rt.too_small:r="array"===e.type?`Array must contain ${e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be greater than ${e.inclusive?"or equal to ":""}${e.minimum}`:"date"===e.type?`Date must be greater than ${e.inclusive?"or equal to ":""}${new Date(e.minimum)}`:"Invalid input";break;case rt.too_big:r="array"===e.type?`Array must contain ${e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be less than ${e.inclusive?"or equal to ":""}${e.maximum}`:"date"===e.type?`Date must be smaller than ${e.inclusive?"or equal to ":""}${new Date(e.maximum)}`:"Invalid input";break;case rt.custom:r="Invalid input";break;case rt.invalid_intersection_types:r="Intersection results could not be merged";break;case rt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;default:r=t.defaultError,Je.assertNever(e)}return{message:r}},st=it;function at(){return st}var nt=e=>{const{data:t,path:r,errorMaps:o,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};let n="";const c=o.filter((e=>!!e)).slice().reverse();for(const e of c)n=e(a,{data:t,defaultError:n}).message;return{...i,path:s,message:i.message||n}};function ct(e,t){const r=nt({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,at(),it].filter((e=>!!e))});e.common.issues.push(r)}var pt,dt,lt=class{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const o of t){if("aborted"===o.status)return ut;"dirty"===o.status&&e.dirty(),r.push(o.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return lt.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const o of t){const{key:t,value:i}=o;if("aborted"===t.status)return ut;if("aborted"===i.status)return ut;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),(void 0!==i.value||o.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}},ut=Object.freeze({status:"aborted"}),mt=e=>({status:"valid",value:e}),yt=e=>"aborted"===e.status,ft=e=>"dirty"===e.status,ht=e=>"valid"===e.status,gt=e=>void 0!==typeof Promise&&e instanceof Promise;(dt=pt||(pt={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},dt.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var bt=class{constructor(e,t,r,o){this.parent=e,this.data=t,this._path=r,this._key=o}get path(){return this._path.concat(this._key)}},vt=(e,t)=>{if(ht(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ot(e.common.issues)}};function wt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:o,description:i}=e;if(t&&(r||o))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=o?o:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}var xt=class{constructor(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return tt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new lt,ctx:{common:e.parent.common,data:e.data,parsedType:tt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(gt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const o={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tt(e)},i=this._parseSync({data:e,path:o.path,parent:o});return vt(o,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tt(e)},o=this._parse({data:e,path:[],parent:r}),i=await(gt(o)?o:Promise.resolve(o));return vt(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,o)=>{const i=e(t),s=()=>o.addIssue({code:rt.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,o)=>!!e(r)||(o.addIssue("function"==typeof t?t(r,o):t),!1)))}_refinement(e){return new or({schema:this,typeName:cr.ZodEffects,effect:{type:"refinement",refinement:e}})}optional(){return ir.create(this)}nullable(){return sr.create(this)}nullish(){return this.optional().nullable()}array(){return Bt.create(this)}promise(){return rr.create(this)}or(e){return Ut.create([this,e])}and(e){return Gt.create(this,e)}transform(e){return new or({schema:this,typeName:cr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ar({innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:cr.ZodDefault})}brand(){return new lr({typeName:cr.ZodBranded,type:this,...wt(void 0)})}describe(e){return new(0,this.constructor)({...this._def,description:e})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},kt=/^c[^\s-]{8,}$/i,At=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,_t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,jt=class extends xt{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement((t=>e.test(t)),{validation:t,code:rt.invalid_string,...pt.errToObj(r)}),this.nonempty=e=>this.min(1,pt.errToObj(e)),this.trim=()=>new jt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._getType(e)!==et.string){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.string,received:t.parsedType}),ut}const t=new lt;let r;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),ct(r,{code:rt.too_small,minimum:o.value,type:"string",inclusive:!0,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),ct(r,{code:rt.too_big,maximum:o.value,type:"string",inclusive:!0,message:o.message}),t.dirty());else if("email"===o.kind)_t.test(e.data)||(r=this._getOrReturnCtx(e,r),ct(r,{validation:"email",code:rt.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)At.test(e.data)||(r=this._getOrReturnCtx(e,r),ct(r,{validation:"uuid",code:rt.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)kt.test(e.data)||(r=this._getOrReturnCtx(e,r),ct(r,{validation:"cuid",code:rt.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),ct(r,{validation:"url",code:rt.invalid_string,message:o.message}),t.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ct(r,{validation:"regex",code:rt.invalid_string,message:o.message}),t.dirty())):"trim"===o.kind?e.data=e.data.trim():"startsWith"===o.kind?e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),ct(r,{code:rt.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty()):"endsWith"===o.kind?e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),ct(r,{code:rt.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty()):Je.assertNever(o);return{status:t.value,value:e.data}}_addCheck(e){return new jt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...pt.errToObj(t)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...pt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...pt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...pt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...pt.errToObj(t)})}length(e,t){return this.min(e,t).max(e,t)}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function St(e,t){const r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,i=r>o?r:o;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}jt.create=e=>new jt({checks:[],typeName:cr.ZodString,...wt(e)});var Rt=class extends xt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._getType(e)!==et.number){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.number,received:t.parsedType}),ut}let t;const r=new lt;for(const o of this._def.checks)"int"===o.kind?Je.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ct(t,{code:rt.invalid_type,expected:"integer",received:"float",message:o.message}),r.dirty()):"min"===o.kind?(o.inclusive?e.data<o.value:e.data<=o.value)&&(t=this._getOrReturnCtx(e,t),ct(t,{code:rt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,message:o.message}),r.dirty()):"max"===o.kind?(o.inclusive?e.data>o.value:e.data>=o.value)&&(t=this._getOrReturnCtx(e,t),ct(t,{code:rt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,message:o.message}),r.dirty()):"multipleOf"===o.kind?0!==St(e.data,o.value)&&(t=this._getOrReturnCtx(e,t),ct(t,{code:rt.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):Je.assertNever(o);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,pt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pt.toString(t))}setLimit(e,t,r,o){return new Rt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:pt.toString(o)}]})}_addCheck(e){return new Rt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind))}};Rt.create=e=>new Rt({checks:[],typeName:cr.ZodNumber,...wt(e)});var Ct=class extends xt{_parse(e){if(this._getType(e)!==et.bigint){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.bigint,received:t.parsedType}),ut}return mt(e.data)}};Ct.create=e=>new Ct({typeName:cr.ZodBigInt,...wt(e)});var Et=class extends xt{_parse(e){if(this._getType(e)!==et.boolean){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.boolean,received:t.parsedType}),ut}return mt(e.data)}};Et.create=e=>new Et({typeName:cr.ZodBoolean,...wt(e)});var Tt=class extends xt{_parse(e){if(this._getType(e)!==et.date){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.date,received:t.parsedType}),ut}if(isNaN(e.data.getTime()))return ct(this._getOrReturnCtx(e),{code:rt.invalid_date}),ut;const t=new lt;let r;for(const o of this._def.checks)"min"===o.kind?e.data.getTime()<o.value&&(r=this._getOrReturnCtx(e,r),ct(r,{code:rt.too_small,message:o.message,inclusive:!0,minimum:o.value,type:"date"}),t.dirty()):"max"===o.kind?e.data.getTime()>o.value&&(r=this._getOrReturnCtx(e,r),ct(r,{code:rt.too_big,message:o.message,inclusive:!0,maximum:o.value,type:"date"}),t.dirty()):Je.assertNever(o);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:pt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:pt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};Tt.create=e=>new Tt({checks:[],typeName:cr.ZodDate,...wt(e)});var $t=class extends xt{_parse(e){if(this._getType(e)!==et.undefined){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.undefined,received:t.parsedType}),ut}return mt(e.data)}};$t.create=e=>new $t({typeName:cr.ZodUndefined,...wt(e)});var It=class extends xt{_parse(e){if(this._getType(e)!==et.null){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.null,received:t.parsedType}),ut}return mt(e.data)}};It.create=e=>new It({typeName:cr.ZodNull,...wt(e)});var qt=class extends xt{constructor(){super(...arguments),this._any=!0}_parse(e){return mt(e.data)}};qt.create=e=>new qt({typeName:cr.ZodAny,...wt(e)});var Dt=class extends xt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return mt(e.data)}};Dt.create=e=>new Dt({typeName:cr.ZodUnknown,...wt(e)});var Pt=class extends xt{_parse(e){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.never,received:t.parsedType}),ut}};Pt.create=e=>new Pt({typeName:cr.ZodNever,...wt(e)});var Vt=class extends xt{_parse(e){if(this._getType(e)!==et.undefined){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.void,received:t.parsedType}),ut}return mt(e.data)}};Vt.create=e=>new Vt({typeName:cr.ZodVoid,...wt(e)});var Nt,Bt=class extends xt{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),o=this._def;if(t.parsedType!==et.array)return ct(t,{code:rt.invalid_type,expected:et.array,received:t.parsedType}),ut;if(null!==o.minLength&&t.data.length<o.minLength.value&&(ct(t,{code:rt.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,message:o.minLength.message}),r.dirty()),null!==o.maxLength&&t.data.length>o.maxLength.value&&(ct(t,{code:rt.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,message:o.maxLength.message}),r.dirty()),t.common.async)return Promise.all(t.data.map(((e,r)=>o.type._parseAsync(new bt(t,e,t.path,r))))).then((e=>lt.mergeArray(r,e)));const i=t.data.map(((e,r)=>o.type._parseSync(new bt(t,e,t.path,r))));return lt.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Bt({...this._def,minLength:{value:e,message:pt.toString(t)}})}max(e,t){return new Bt({...this._def,maxLength:{value:e,message:pt.toString(t)}})}length(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Bt.create=(e,t)=>new Bt({type:e,minLength:null,maxLength:null,typeName:cr.ZodArray,...wt(t)}),(Nt||(Nt={})).mergeShapes=(e,t)=>({...e,...t});var Ot=e=>t=>new Mt({...e,shape:()=>({...e.shape(),...t})});function Lt(e){if(e instanceof Mt){const t={};for(const r in e.shape){const o=e.shape[r];t[r]=ir.create(Lt(o))}return new Mt({...e._def,shape:()=>t})}return e instanceof Bt?Bt.create(Lt(e.element)):e instanceof ir?ir.create(Lt(e.unwrap())):e instanceof sr?sr.create(Lt(e.unwrap())):e instanceof Ft?Ft.create(e.items.map((e=>Lt(e)))):e}var Mt=class extends xt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Ot(this._def),this.extend=Ot(this._def)}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Je.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==et.object){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.object,received:t.parsedType}),ut}const{status:t,ctx:r}=this._processInputParams(e),{shape:o,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Pt&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const a=[];for(const e of i){const t=o[e],i=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new bt(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof Pt){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(ct(r,{code:rt.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const o=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new bt(r,o,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>lt.mergeObjectSync(t,e))):lt.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return pt.errToObj,new Mt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var o,i,s,a;const n=null!==(s=null===(i=(o=this._def).errorMap)||void 0===i?void 0:i.call(o,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=pt.errToObj(e).message)&&void 0!==a?a:n}:{message:n}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}setKey(e,t){return this.augment({[e]:t})}merge(e){return new Mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Nt.mergeShapes(this._def.shape(),e._def.shape()),typeName:cr.ZodObject})}catchall(e){return new Mt({...this._def,catchall:e})}pick(e){const t={};return Je.objectKeys(e).map((e=>{this.shape[e]&&(t[e]=this.shape[e])})),new Mt({...this._def,shape:()=>t})}omit(e){const t={};return Je.objectKeys(this.shape).map((r=>{-1===Je.objectKeys(e).indexOf(r)&&(t[r]=this.shape[r])})),new Mt({...this._def,shape:()=>t})}deepPartial(){return Lt(this)}partial(e){const t={};if(e)return Je.objectKeys(this.shape).map((r=>{-1===Je.objectKeys(e).indexOf(r)?t[r]=this.shape[r]:t[r]=this.shape[r].optional()})),new Mt({...this._def,shape:()=>t});for(const e in this.shape){const r=this.shape[e];t[e]=r.optional()}return new Mt({...this._def,shape:()=>t})}required(){const e={};for(const t in this.shape){let r=this.shape[t];for(;r instanceof ir;)r=r._def.innerType;e[t]=r}return new Mt({...this._def,shape:()=>e})}keyof(){return Yt(Je.objectKeys(this.shape))}};Mt.create=(e,t)=>new Mt({shape:()=>e,unknownKeys:"strip",catchall:Pt.create(),typeName:cr.ZodObject,...wt(t)}),Mt.strictCreate=(e,t)=>new Mt({shape:()=>e,unknownKeys:"strict",catchall:Pt.create(),typeName:cr.ZodObject,...wt(t)}),Mt.lazycreate=(e,t)=>new Mt({shape:e,unknownKeys:"strip",catchall:Pt.create(),typeName:cr.ZodObject,...wt(t)});var Ut=class extends xt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new ot(e.ctx.common.issues)));return ct(t,{code:rt.invalid_union,unionErrors:r}),ut}));{let e;const o=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&o.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=o.map((e=>new ot(e)));return ct(t,{code:rt.invalid_union,unionErrors:i}),ut}}get options(){return this._def.options}};Ut.create=(e,t)=>new Ut({options:e,typeName:cr.ZodUnion,...wt(t)});var Zt=class extends xt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==et.object)return ct(t,{code:rt.invalid_type,expected:et.object,received:t.parsedType}),ut;const r=this.discriminator,o=t.data[r],i=this.options.get(o);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ct(t,{code:rt.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),ut)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(e,t,r){const o=new Map;try{t.forEach((t=>{const r=t.shape[e].value;o.set(r,t)}))}catch(e){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(o.size!==t.length)throw new Error("Some of the discriminator values are not unique");return new Zt({typeName:cr.ZodDiscriminatedUnion,discriminator:e,options:o,...wt(r)})}};function zt(e,t){const r=tt(e),o=tt(t);if(e===t)return{valid:!0,data:e};if(r===et.object&&o===et.object){const r=Je.objectKeys(t),o=Je.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of o){const o=zt(e[r],t[r]);if(!o.valid)return{valid:!1};i[r]=o.data}return{valid:!0,data:i}}if(r===et.array&&o===et.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let o=0;o<e.length;o++){const i=zt(e[o],t[o]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===et.date&&o===et.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Gt=class extends xt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),o=(e,o)=>{if(yt(e)||yt(o))return ut;const i=zt(e.value,o.value);return i.valid?((ft(e)||ft(o))&&t.dirty(),{status:t.value,value:i.data}):(ct(r,{code:rt.invalid_intersection_types}),ut)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>o(e,t))):o(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Gt.create=(e,t,r)=>new Gt({left:e,right:t,typeName:cr.ZodIntersection,...wt(r)});var Ft=class extends xt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.array)return ct(r,{code:rt.invalid_type,expected:et.array,received:r.parsedType}),ut;if(r.data.length<this._def.items.length)return ct(r,{code:rt.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),ut;!this._def.rest&&r.data.length>this._def.items.length&&(ct(r,{code:rt.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),t.dirty());const o=r.data.map(((e,t)=>{const o=this._def.items[t]||this._def.rest;return o?o._parse(new bt(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(o).then((e=>lt.mergeArray(t,e))):lt.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new Ft({...this._def,rest:e})}};Ft.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ft({items:e,typeName:cr.ZodTuple,rest:null,...wt(t)})};var Kt=class extends xt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.object)return ct(r,{code:rt.invalid_type,expected:et.object,received:r.parsedType}),ut;const o=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)o.push({key:i._parse(new bt(r,e,r.path,e)),value:s._parse(new bt(r,r.data[e],r.path,e))});return r.common.async?lt.mergeObjectAsync(t,o):lt.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,r){return new Kt(t instanceof xt?{keyType:e,valueType:t,typeName:cr.ZodRecord,...wt(r)}:{keyType:jt.create(),valueType:e,typeName:cr.ZodRecord,...wt(t)})}},Wt=class extends xt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.map)return ct(r,{code:rt.invalid_type,expected:et.map,received:r.parsedType}),ut;const o=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:o._parse(new bt(r,e,r.path,[s,"key"])),value:i._parse(new bt(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const o=await r.key,i=await r.value;if("aborted"===o.status||"aborted"===i.status)return ut;"dirty"!==o.status&&"dirty"!==i.status||t.dirty(),e.set(o.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const o=r.key,i=r.value;if("aborted"===o.status||"aborted"===i.status)return ut;"dirty"!==o.status&&"dirty"!==i.status||t.dirty(),e.set(o.value,i.value)}return{status:t.value,value:e}}}};Wt.create=(e,t,r)=>new Wt({valueType:t,keyType:e,typeName:cr.ZodMap,...wt(r)});var Ht=class extends xt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.set)return ct(r,{code:rt.invalid_type,expected:et.set,received:r.parsedType}),ut;const o=this._def;null!==o.minSize&&r.data.size<o.minSize.value&&(ct(r,{code:rt.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,message:o.minSize.message}),t.dirty()),null!==o.maxSize&&r.data.size>o.maxSize.value&&(ct(r,{code:rt.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,message:o.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const o of e){if("aborted"===o.status)return ut;"dirty"===o.status&&t.dirty(),r.add(o.value)}return{status:t.value,value:r}}const a=[...r.data.values()].map(((e,t)=>i._parse(new bt(r,e,r.path,t))));return r.common.async?Promise.all(a).then((e=>s(e))):s(a)}min(e,t){return new Ht({...this._def,minSize:{value:e,message:pt.toString(t)}})}max(e,t){return new Ht({...this._def,maxSize:{value:e,message:pt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Ht.create=(e,t)=>new Ht({valueType:e,minSize:null,maxSize:null,typeName:cr.ZodSet,...wt(t)});var Jt=class extends xt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==et.function)return ct(t,{code:rt.invalid_type,expected:et.function,received:t.parsedType}),ut;function r(e,r){return nt({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,at(),it].filter((e=>!!e)),issueData:{code:rt.invalid_arguments,argumentsError:r}})}function o(e,r){return nt({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,at(),it].filter((e=>!!e)),issueData:{code:rt.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;return this._def.returns instanceof rr?mt((async(...e)=>{const t=new ot([]),a=await this._def.args.parseAsync(e,i).catch((o=>{throw t.addIssue(r(e,o)),t})),n=await s(...a);return await this._def.returns._def.type.parseAsync(n,i).catch((e=>{throw t.addIssue(o(n,e)),t}))})):mt(((...e)=>{const t=this._def.args.safeParse(e,i);if(!t.success)throw new ot([r(e,t.error)]);const a=s(...t.data),n=this._def.returns.safeParse(a,i);if(!n.success)throw new ot([o(a,n.error)]);return n.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Jt({...this._def,args:Ft.create(e).rest(Dt.create())})}returns(e){return new Jt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Jt({args:e||Ft.create([]).rest(Dt.create()),returns:t||Dt.create(),typeName:cr.ZodFunction,...wt(r)})}},Xt=class extends xt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Xt.create=(e,t)=>new Xt({getter:e,typeName:cr.ZodLazy,...wt(t)});var Qt=class extends xt{_parse(e){return e.data!==this._def.value?(ct(this._getOrReturnCtx(e),{code:rt.invalid_literal,expected:this._def.value}),ut):{status:"valid",value:e.data}}get value(){return this._def.value}};function Yt(e,t){return new er({values:e,typeName:cr.ZodEnum,...wt(t)})}Qt.create=(e,t)=>new Qt({value:e,typeName:cr.ZodLiteral,...wt(t)});var er=class extends xt{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return ct(t,{expected:Je.joinValues(r),received:t.parsedType,code:rt.invalid_type}),ut}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return ct(t,{received:t.data,code:rt.invalid_enum_value,options:r}),ut}return mt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}};er.create=Yt;var tr=class extends xt{_parse(e){const t=Je.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==et.string&&r.parsedType!==et.number){const e=Je.objectValues(t);return ct(r,{expected:Je.joinValues(e),received:r.parsedType,code:rt.invalid_type}),ut}if(-1===t.indexOf(e.data)){const e=Je.objectValues(t);return ct(r,{received:r.data,code:rt.invalid_enum_value,options:e}),ut}return mt(e.data)}get enum(){return this._def.values}};tr.create=(e,t)=>new tr({values:e,typeName:cr.ZodNativeEnum,...wt(t)});var rr=class extends xt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==et.promise&&!1===t.common.async)return ct(t,{code:rt.invalid_type,expected:et.promise,received:t.parsedType}),ut;const r=t.parsedType===et.promise?t.data:Promise.resolve(t.data);return mt(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}};rr.create=(e,t)=>new rr({type:e,typeName:cr.ZodPromise,...wt(t)});var or=class extends xt{innerType(){return this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),o=this._def.effect||null;if("preprocess"===o.type){const e=o.transform(r.data);return r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}const i={addIssue:e=>{ct(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"refinement"===o.type){const e=e=>{const t=o.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===o.status?ut:("dirty"===o.status&&t.dirty(),e(o.value),{status:t.value,value:o.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?ut:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===o.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ht(e))return e;const s=o.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>ht(e)?Promise.resolve(o.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}Je.assertNever(o)}};or.create=(e,t,r)=>new or({schema:e,typeName:cr.ZodEffects,effect:t,...wt(r)}),or.createWithPreprocess=(e,t,r)=>new or({schema:t,effect:{type:"preprocess",transform:e},typeName:cr.ZodEffects,...wt(r)});var ir=class extends xt{_parse(e){return this._getType(e)===et.undefined?mt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ir.create=(e,t)=>new ir({innerType:e,typeName:cr.ZodOptional,...wt(t)});var sr=class extends xt{_parse(e){return this._getType(e)===et.null?mt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};sr.create=(e,t)=>new sr({innerType:e,typeName:cr.ZodNullable,...wt(t)});var ar=class extends xt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===et.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};ar.create=(e,t)=>new ir({innerType:e,typeName:cr.ZodOptional,...wt(t)});var nr=class extends xt{_parse(e){if(this._getType(e)!==et.nan){const t=this._getOrReturnCtx(e);return ct(t,{code:rt.invalid_type,expected:et.nan,received:t.parsedType}),ut}return{status:"valid",value:e.data}}};nr.create=e=>new nr({typeName:cr.ZodNaN,...wt(e)});var cr,pr,dr=Symbol("zod_brand"),lr=class extends xt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},ur=(e,t={},r)=>e?qt.create().superRefine(((o,i)=>{if(!e(o)){const e="function"==typeof t?t(o):t,s="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...s,fatal:r})}})):qt.create(),mr={object:Mt.lazycreate};(pr=cr||(cr={})).ZodString="ZodString",pr.ZodNumber="ZodNumber",pr.ZodNaN="ZodNaN",pr.ZodBigInt="ZodBigInt",pr.ZodBoolean="ZodBoolean",pr.ZodDate="ZodDate",pr.ZodUndefined="ZodUndefined",pr.ZodNull="ZodNull",pr.ZodAny="ZodAny",pr.ZodUnknown="ZodUnknown",pr.ZodNever="ZodNever",pr.ZodVoid="ZodVoid",pr.ZodArray="ZodArray",pr.ZodObject="ZodObject",pr.ZodUnion="ZodUnion",pr.ZodDiscriminatedUnion="ZodDiscriminatedUnion",pr.ZodIntersection="ZodIntersection",pr.ZodTuple="ZodTuple",pr.ZodRecord="ZodRecord",pr.ZodMap="ZodMap",pr.ZodSet="ZodSet",pr.ZodFunction="ZodFunction",pr.ZodLazy="ZodLazy",pr.ZodLiteral="ZodLiteral",pr.ZodEnum="ZodEnum",pr.ZodEffects="ZodEffects",pr.ZodNativeEnum="ZodNativeEnum",pr.ZodOptional="ZodOptional",pr.ZodNullable="ZodNullable",pr.ZodDefault="ZodDefault",pr.ZodPromise="ZodPromise",pr.ZodBranded="ZodBranded";var yr=jt.create,fr=Rt.create,hr=nr.create,gr=Ct.create,br=Et.create,vr=Tt.create,wr=$t.create,xr=It.create,kr=qt.create,Ar=Dt.create,_r=Pt.create,jr=Vt.create,Sr=Bt.create,Rr=Mt.create,Cr=Mt.strictCreate,Er=Ut.create,Tr=Zt.create,$r=Gt.create,Ir=Ft.create,qr=Kt.create,Dr=Wt.create,Pr=Ht.create,Vr=Jt.create,Nr=Xt.create,Br=Qt.create,Or=er.create,Lr=tr.create,Mr=rr.create,Ur=or.create,Zr=ir.create,zr=sr.create,Gr=or.createWithPreprocess,Fr=ut,Kr=Object.freeze({__proto__:null,getParsedType:tt,ZodParsedType:et,defaultErrorMap:it,setErrorMap:function(e){st=e},getErrorMap:at,makeIssue:nt,EMPTY_PATH:[],addIssueToContext:ct,ParseStatus:lt,INVALID:ut,DIRTY:e=>({status:"dirty",value:e}),OK:mt,isAborted:yt,isDirty:ft,isValid:ht,isAsync:gt,ZodType:xt,ZodString:jt,ZodNumber:Rt,ZodBigInt:Ct,ZodBoolean:Et,ZodDate:Tt,ZodUndefined:$t,ZodNull:It,ZodAny:qt,ZodUnknown:Dt,ZodNever:Pt,ZodVoid:Vt,ZodArray:Bt,get objectUtil(){return Nt},ZodObject:Mt,ZodUnion:Ut,ZodDiscriminatedUnion:Zt,ZodIntersection:Gt,ZodTuple:Ft,ZodRecord:Kt,ZodMap:Wt,ZodSet:Ht,ZodFunction:Jt,ZodLazy:Xt,ZodLiteral:Qt,ZodEnum:er,ZodNativeEnum:tr,ZodPromise:rr,ZodEffects:or,ZodTransformer:or,ZodOptional:ir,ZodNullable:sr,ZodDefault:ar,ZodNaN:nr,BRAND:dr,ZodBranded:lr,custom:ur,Schema:xt,ZodSchema:xt,late:mr,get ZodFirstPartyTypeKind(){return cr},any:kr,array:Sr,bigint:gr,boolean:br,date:vr,discriminatedUnion:Tr,effect:Ur,enum:Or,function:Vr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ur((t=>t instanceof e),t,!0),intersection:$r,lazy:Nr,literal:Br,map:Dr,nan:hr,nativeEnum:Lr,never:_r,null:xr,nullable:zr,number:fr,object:Rr,oboolean:()=>br().optional(),onumber:()=>fr().optional(),optional:Zr,ostring:()=>yr().optional(),preprocess:Gr,promise:Mr,record:qr,set:Pr,strictObject:Cr,string:yr,transformer:Ur,tuple:Ir,undefined:wr,union:Er,unknown:Ar,void:jr,NEVER:Fr,ZodIssueCode:rt,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ot}),Wr={cid:Kr.any().refine((e=>null!==te.asCID(e)),{message:"Not a CID"}).transform((e=>te.asCID(e))),bytes:Kr.instanceof(Uint8Array),string:Kr.string(),array:Kr.array(Kr.unknown()),map:Kr.record(Kr.string(),Kr.unknown()),unknown:Kr.unknown()},Hr=e=>(new TextEncoder).encode(e).byteLength,Jr=e=>[...(new Intl.Segmenter).segment(e)].length,Xr=(["at","atp","plc","pds","did","repo","tid","nsid","xrpc","lex","lexicon","bsky","bluesky","handle","about","abuse","access","account","accounts","acme","activate","activities","activity","ad","add","address","adm","admanager","admin","administration","administrator","administrators","admins","ads","adsense","adult","advertising","adwords","affiliate","affiliatepage","affiliates","afp","ajax","all","alpha","analysis","analytics","android","anon","anonymous","answer","answers","ap","api","apis","app","appengine","appnews","apps","archive","archives","article","asdf","asset","assets","auth","authentication","avatar","backup","bank","banner","banners","base","beginners","beta","billing","bin","binaries","binary","blackberry","blog","blogs","blogsearch","board","book","bookmark","bookmarks","books","bot","bots","bug","bugs","business","buy","buzz","cache","calendar","call","campaign","cancel","captcha","career","careers","cart","catalog","catalogs","categories","category","cdn","cgi","cgi-bin","changelog","chart","charts","chat","check","checked","checking","checkout","client","cliente","clients","clients1","cnarne","code","comercial","comment","comments","communities","community","company","compare","compras","config","configuration","confirm","confirmation","connect","contact","contacts","contactus","contact-us","contact_us","content","contest","contribute","contributor","contributors","coppa","copyright","copyrights","core","corp","countries","country","cpanel","create","css","cssproxy","customise","customize","dashboard","data","db","default","delete","demo","design","designer","desktop","destroy","dev","devel","developer","developers","devs","diagram","diary","dict","dictionary","die","dir","directory","direct_messages","direct-messages","dist","diversity","dl","dmca","doc","docs","documentation","documentations","documents","domain","domains","donate","download","downloads","e","e-mail","earth","ecommerce","edit","edits","editor","edu","education","email","embed","embedded","employment","employments","empty","enable","encrypted","end","engine","enterprise","enterprises","entries","entry","error","errorlog","errors","eval","event","example","examplecommunity","exampleopenid","examplesyn","examplesyndicated","exampleusername","exchange","exit","explore","faq","faqs","favorite","favorites","favourite","favourites","feature","features","feed","feedback","feedburner","feedproxy","feeds","file","files","finance","folder","folders","first","following","forgot","form","forms","forum","forums","founder","free","friend","friends","ftp","fuck","fun","fusion","gadget","gadgets","game","games","gears","general","geographic","get","gettingstarted","gift","gifts","gist","git","github","gmail","go","golang","goto","gov","graph","graphs","group","groups","guest","guests","guide","guides","hack","hacks","head","help","home","homepage","host","hosting","hostmaster","hostname","howto","how-to","how_to","html","htrnl","http","httpd","https","i","iamges","icon","icons","id","idea","ideas","im","image","images","img","imap","inbox","inboxes","index","indexes","info","information","inquiry","intranet","investor","investors","invitation","invitations","invite","invoice","invoices","imac","ios","ipad","iphone","irc","irnages","irng","is","issue","issues","it","item","items","java","javascript","job","jobs","join","js","json","jump","kb","knowledge-base","knowledgebase","lab","labs","language","languages","last","ldap_status","ldap-status","ldapstatus","legal","license","licenses","link","links","linux","list","lists","livejournal","lj","local","locale","location","log","log-in","log-out","login","logout","logs","log_in","log_out","m","mac","macos","macosx","mac-os","mac-os-x","mac_os_x","mail","mailer","mailing","main","maintenance","manage","manager","manual","map","maps","marketing","master","me","media","member","members","memories","memory","merchandise","message","messages","messenger","mg","microblog","microblogs","mine","mis","misc","mms","mob","mobile","model","models","money","movie","movies","mp3","mp4","msg","msn","music","mx","my","mymme","mysql","name","named","nan","navi","navigation","net","network","networks","new","news","newsletter","nick","nickname","nil","none","notes","noticias","notification","notifications","notify","ns","ns1","ns2","ns3","ns4","ns5","null","oauth","oauth-clients","oauth_clients","ocsp","offer","offers","official","old","online","openid","operator","option","options","order","orders","org","organization","organizations","other","overview","owner","owners","p0rn","pack","page","pager","pages","paid","panel","partner","partnerpage","partners","password","patch","pay","payment","people","perl","person","phone","photo","photoalbum","photos","php","phpmyadmin","phppgadmin","phpredisadmin","pic","pics","picture","pictures","ping","pixel","places","plan","plans","plugin","plugins","podcasts","policies","policy","pop","pop3","popular","porn","portal","portals","post","postfix","postmaster","posts","pr","pr0n","premium","press","price","pricing","principles","print","privacy","privacy-policy","privacypolicy","privacy_policy","private","prod","product","production","products","profile","profiles","project","projects","promo","promotions","proxies","proxy","pub","public","purchase","purpose","put","python","queries","query","radio","random","ranking","read","reader","readme","recent","recruit","recruitment","redirect","register","registration","release","remove","replies","report","reports","repositories","repository","req","request","requests","research","reset","resolve","resolver","review","rnail","rnicrosoft","roc","root","rss","ruby","rule","sag","sale","sales","sample","samples","sandbox","save","scholar","school","schools","script","scripts","search","secure","security","self","seminars","send","server","server-info","server_info","server-status","server_status","servers","service","services","session","sessions","setting","settings","setup","share","shop","shopping","shortcut","shortcuts","show","sign-in","sign-up","signin","signout","signup","sign_in","sign_up","site","sitemap","sitemaps","sitenews","sites","sketchup","sky","slash","slashinvoice","slut","smartphone","sms","smtp","soap","software","sorry","source","spec","special","spreadsheet","spreadsheets","sql","src","srntp","ssh","ssl","ssladmin","ssladministrator","sslwebmaster","ssytem","staff","stage","staging","start","stat","state","static","statistics","stats","status","store","stores","stories","style","styleguide","styles","stylesheet","stylesheets","subdomain","subscribe","subscription","subscriptions","suggest","suggestqueries","support","survey","surveys","surveytool","svn","swf","syn","sync","syndicated","sys","sysadmin","sysadministrator","sysadmins","system","tablet","tablets","tag","tags","talk","talkgadget","task","tasks","team","teams","tech","telnet","term","terms","terms-of-service","termsofservice","terms_of_service","test","testing","tests","text","theme","themes","thread","threads","ticket","tickets","tmp","todo","to-do","to_do","toml","tool","toolbar","toolbars","tools","top","topic","topics","tos","tour","trac","translate","trace","translation","translations","translator","trends","tutorial","tux","tv","twitter","txt","ul","undef","unfollow","unsubscribe","update","updates","upgrade","upgrades","upi","upload","uploads","url","usage","user","username","usernames","users","uuid","validation","validations","ver","version","video","videos","video-stats","visitor","visitors","voice","volunteer","volunteers","w","watch","wave","weather","web","webdisk","webhook","webhooks","webmail","webmaster","webmasters","webrnail","website","websites","welcome","whm","whois","widget","widgets","wifi","wiki","wikis","win","windows","word","work","works","workshop","wpad","ww","wws","www","wwws","wwww","xfn","xhtml","xhtrnl","xml","xmpp","xpg","xxx","yaml","year","yml","you","yourdomain","yourname","yoursite","yourusername","10ronaldinho","3gerardpique","adele","akshaykumar","aliaa08","aliciakeys","amitshah","andresiniesta8","anushkasharma","arianagrande","arrahman","arvindkejriwal","avrillavigne","barackobama","bbcbreaking","bbcworld","beingsalmankhan","billgates","britneyspears","brunomars","bts_bighit","bts_twt","championsleague","chrisbrown","cnnbrk","coldplay","conanobrien","cristiano","danieltosh","davidguetta","ddlovato","deepikapadukone","drake","elisapie","ellendegeneres","elonmusk","eminem","emmawatson","fcbarcelona","foxnews","harry_styles","hillaryclinton","iamsrk","ihrithik","imvkohli","instagram","jimmyfallon","jlo","joebiden","jtimberlake","justinbieber","kaka","kanyewest","katyperry","kendalljenner","kevinhart4real","khloekardashian","kimkardashian","kingjames","kourtneykardash","kyliejenner","ladygaga","liampayne","liltunechi","manutd","mariahcarey","mileycyrus","mohamadalarefe","narendramodi","nasa","nba","neymarjr","nfl","niallofficial","nickiminaj","npr","nytimes","onedirection","oprah","pink","pitbull","playstation","pmoindia","premierleague","priyankachopra","realdonaldtrump","ricky_martin","rihanna","sachin_rt","selenagomez","shakira","shawnmendes","sportscenter","srbachchan","subhisharma100","taylorswift13","theeconomist","twitter","virendersehwag","whitehouse45","wizkhalifa","youtube","zaynmalik","beyonce","billieeilish","leomessi","natgeo","nike","snoopdogg","taylorswift","therock","10downingstreet","aoc","carterjwm","dril","gretathunberg","kamalaharris","kremlinrussia_e","potus","rondesantisfl","ukraine","washingtonpost","yousuck2020","zelenskyyua","akiko_lawson","ariyoshihiroiki","asahi","dozle_official","famima_now","ff_xiv_jp","fujitv","gigazine","hajimesyacho","hikakin","jocx","jotx","kiyo_saiore","mainichi","matsu_bouzu","naomiosaka","nhk","nikkei","nintendo","ntv","oowareware1945","pamyurin","poke_times","rolaworld","seikintv","starbucksjapan","tbs","tbs_pr","tvasahi","tvtokyo","yokoono","yomiuri_online","brasildefato","claudialeitte","correio","em_com","estadao","folha","gazetadopovo","ivetesangalo","jairbolsonaro","jornaldobrasil","jornaloglobo","lucianohuck","lulaoficial","marcosmion","paulocoelho","portalr7","rede_globo","zerohora"].reduce(((e,t)=>({...e,[t]:!0})),{}),e=>{if(!/^[a-zA-Z0-9.-]*$/.test(e))throw new Qr("Disallowed characters in handle (ASCII letters, digits, dashes, periods only)");if(e.length>253)throw new Qr("Handle is too long (253 chars max)");const t=e.split(".");if(t.length<2)throw new Qr("Handle domain needs at least two parts");for(let e=0;e<t.length;e++){const r=t[e];if(r.length<1)throw new Qr("Handle parts can not be empty");if(r.length>63)throw new Qr("Handle part too long (max 63 chars)");if(r.endsWith("-")||r.startsWith("-"))throw new Qr("Handle parts can not start or end with hyphens");if(e+1==t.length&&!/^[a-zA-Z]/.test(r))throw new Qr("Handle final component (TLD) must start with ASCII letter")}}),Qr=class extends Error{},Yr=e=>{if(!/^[a-zA-Z0-9._:%-]*$/.test(e))throw new eo("Disallowed characters in DID (ASCII letters, digits, and a couple other characters only)");const t=e.split(":");if(t.length<3)throw new eo("DID requires prefix, method, and method-specific content");if("did"!=t[0])throw new eo('DID requires "did:" prefix');if(!/^[a-z]+$/.test(t[1]))throw new eo("DID method must be lower-case letters");if(e.endsWith(":")||e.endsWith("%"))throw new eo('DID can not end with ":" or "%"');if(e.length>8192)throw new eo("DID is far too long")},eo=class extends Error{},to=class{constructor(e){this.segments=[],ro(e),this.segments=e.split(".")}static parse(e){return new to(e)}static create(e,t){const r=[...e.split(".").reverse(),t].join(".");return new to(r)}static isValid(e){try{return to.parse(e),!0}catch(e){return!1}}get authority(){return this.segments.slice(0,this.segments.length-1).reverse().join(".")}get name(){return this.segments.at(this.segments.length-1)}toString(){return this.segments.join(".")}},ro=e=>{const t=e.split("."),r="*"===t.at(-1)?t.slice(0,-1).join("."):t.join(".");if(!/^[a-zA-Z0-9.-]*$/.test(r))throw new oo("Disallowed characters in NSID (ASCII letters, digits, dashes, periods only)");if(r.length>382)throw new oo("NSID is too long (382 chars max)");const o=r.split(".");if(t.length<3)throw new oo("NSID needs at least three parts");for(let e=0;e<o.length;e++){const t=o[e];if(t.length<1)throw new oo("NSID parts can not be empty");if(t.length>63&&e+1<o.length)throw new oo("NSID domain part too long (max 63 chars)");if(t.length>128&&e+1==o.length)throw new oo("NSID name part too long (max 127 chars)");if(t.endsWith("-"))throw new oo("NSID parts can not end with hyphen");if(!/^[a-zA-Z]/.test(t))throw new oo("NSID parts must start with ASCII letter")}},oo=class extends Error{},io=e=>{const t=e.split("#");if(t.length>2)throw new Error('ATURI can have at most one "#", separating fragment out');const r=t[1]||null;if(e=t[0],!/^[a-zA-Z0-9._~:@!$&')(*+,;=%/-]*$/.test(e))throw new Error("Disallowed characters in ATURI (ASCII)");const o=e.split("/");if(o.length>=3&&("at:"!=o[0]||0!=o[1].length))throw new Error('ATURI must start with "at://"');if(o.length<3)throw new Error("ATURI requires at least method and authority sections");try{Xr(o[2])}catch{try{Yr(o[2])}catch{throw new Error("ATURI authority must be a valid handle or DID")}}if(o.length>=4){if(0==o[3].length)throw new Error("ATURI can not have a slash after authority without a path segment");try{ro(o[3])}catch{throw new Error("ATURI requires first path segment (if supplied) to be valid NSID")}}if(o.length>=5&&0==o[4].length)throw new Error("ATURI can not have a slash after collection, unless record key is provided");if(o.length>=6)throw new Error("ATURI path can have at most two parts, and no trailing slash");if(t.length>=2&&null==r)throw new Error("ATURI fragment must be non-empty and start with slash");if(null!=r){if(0==r.length||"/"!=r[0])throw new Error("ATURI fragment must be non-empty and start with slash");if(!/^\/[a-zA-Z0-9._~:@!$&')(*+,;=%[\]/-]*$/.test(r))throw new Error("Disallowed characters in ATURI fragment (ASCII)")}if(e.length>8192)throw new Error("ATURI is far too long")},so=/^(at:\/\/)?((?:did:[a-z0-9:%-]+)|(?:[a-z0-9][a-z0-9.:-]*))(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i,ao=/^(\/[^?#\s]*)?(\?[^#\s]+)?(#[^\s]+)?$/i,no=class{constructor(e,t){let r;if(t){if(r=co(t),!r)throw new Error(`Invalid at uri: ${t}`);const o=function(e){const t=ao.exec(e);if(t)return{hash:t[3]||"",pathname:t[1]||"",searchParams:new URLSearchParams(t[2]||"")}}(e);if(!o)throw new Error(`Invalid path: ${e}`);Object.assign(r,o)}else if(r=co(e),!r)throw new Error(`Invalid at uri: ${e}`);this.hash=r.hash,this.host=r.host,this.pathname=r.pathname,this.searchParams=r.searchParams}static make(e,t,r){let o=e;return t&&(o+="/"+t),r&&(o+="/"+r),new no(o)}get protocol(){return"at:"}get origin(){return`at://${this.host}`}get hostname(){return this.host}set hostname(e){this.host=e}get search(){return this.searchParams.toString()}set search(e){this.searchParams=new URLSearchParams(e)}get collection(){return this.pathname.split("/").filter(Boolean)[0]||""}set collection(e){const t=this.pathname.split("/").filter(Boolean);t[0]=e,this.pathname=t.join("/")}get rkey(){return this.pathname.split("/").filter(Boolean)[1]||""}set rkey(e){const t=this.pathname.split("/").filter(Boolean);t[0]||(t[0]="undefined"),t[1]=e,this.pathname=t.join("/")}get href(){return this.toString()}toString(){let e=this.pathname||"/";e.startsWith("/")||(e=`/${e}`);let t=this.searchParams.toString();t&&!t.startsWith("?")&&(t=`?${t}`);let r=this.hash;return r&&!r.startsWith("#")&&(r=`#${r}`),`at://${this.host}${e}${t}${r}`}};function co(e){const t=so.exec(e);if(t)return{hash:t[5]||"",host:t[2]||"",pathname:t[3]||"",searchParams:new URLSearchParams(t[4]||"")}}var po=Kr.object({type:Kr.literal("boolean"),description:Kr.string().optional(),default:Kr.boolean().optional(),const:Kr.boolean().optional()}),lo=Kr.object({type:Kr.literal("integer"),description:Kr.string().optional(),default:Kr.number().int().optional(),minimum:Kr.number().int().optional(),maximum:Kr.number().int().optional(),enum:Kr.number().int().array().optional(),const:Kr.number().int().optional()}),uo=Kr.enum(["datetime","uri","at-uri","did","handle","at-identifier","nsid","cid"]),mo=Kr.object({type:Kr.literal("string"),format:uo.optional(),description:Kr.string().optional(),default:Kr.string().optional(),minLength:Kr.number().int().optional(),maxLength:Kr.number().int().optional(),minGraphemes:Kr.number().int().optional(),maxGraphemes:Kr.number().int().optional(),enum:Kr.string().array().optional(),const:Kr.string().optional(),knownValues:Kr.string().array().optional()}),yo=Kr.object({type:Kr.literal("unknown"),description:Kr.string().optional()}),fo=Kr.union([po,lo,mo,yo]),ho=Kr.object({type:Kr.literal("bytes"),description:Kr.string().optional(),maxLength:Kr.number().optional(),minLength:Kr.number().optional()}),go=Kr.object({type:Kr.literal("cid-link"),description:Kr.string().optional()}),bo=Kr.union([ho,go]),vo=Kr.object({type:Kr.literal("ref"),description:Kr.string().optional(),ref:Kr.string()}),wo=Kr.object({type:Kr.literal("union"),description:Kr.string().optional(),refs:Kr.string().array(),closed:Kr.boolean().optional()}),xo=Kr.union([vo,wo]),ko=Kr.object({type:Kr.literal("blob"),description:Kr.string().optional(),accept:Kr.string().array().optional(),maxSize:Kr.number().optional()}),Ao=Kr.object({type:Kr.literal("array"),description:Kr.string().optional(),items:Kr.union([fo,bo,ko,xo]),minLength:Kr.number().int().optional(),maxLength:Kr.number().int().optional()}),_o=Ao.merge(Kr.object({items:fo})),jo=Kr.object({type:Kr.literal("token"),description:Kr.string().optional()}),So=Kr.object({type:Kr.literal("object"),description:Kr.string().optional(),required:Kr.string().array().optional(),nullable:Kr.string().array().optional(),properties:Kr.record(Kr.union([xo,bo,Ao,ko,fo])).optional()}),Ro=Kr.object({type:Kr.literal("params"),description:Kr.string().optional(),required:Kr.string().array().optional(),properties:Kr.record(Kr.union([fo,_o]))}),Co=Kr.object({description:Kr.string().optional(),encoding:Kr.string(),schema:Kr.union([xo,So]).optional()}),Eo=Kr.object({description:Kr.string().optional(),schema:Kr.union([xo,So]).optional()}),To=Kr.object({name:Kr.string(),description:Kr.string().optional()}),$o=Kr.object({type:Kr.literal("query"),description:Kr.string().optional(),parameters:Ro.optional(),output:Co.optional(),errors:To.array().optional()}),Io=Kr.object({type:Kr.literal("procedure"),description:Kr.string().optional(),parameters:Ro.optional(),input:Co.optional(),output:Co.optional(),errors:To.array().optional()}),qo=Kr.object({type:Kr.literal("subscription"),description:Kr.string().optional(),parameters:Ro.optional(),message:Eo.optional(),infos:To.array().optional(),errors:To.array().optional()}),Do=Kr.object({type:Kr.literal("record"),description:Kr.string().optional(),key:Kr.string().optional(),record:So}),Po=Kr.union([Do,$o,Io,qo,ko,Ao,jo,So,po,lo,mo,ho,go,yo]),Vo=Kr.object({lexicon:Kr.literal(1),id:Kr.string().refine((e=>to.isValid(e)),{message:"Must be a valid NSID"}),revision:Kr.number().optional(),description:Kr.string().optional(),defs:Kr.record(Po)}).superRefine(((e,t)=>{for(const r in e.defs){const o=e.defs[r];"main"===r||"record"!==o.type&&"procedure"!==o.type&&"query"!==o.type&&"subscription"!==o.type||t.addIssue({code:Kr.ZodIssueCode.custom,message:"Records, procedures, queries, and subscriptions must be the main definition."})}}));function No(e){return null!==e&&"object"==typeof e}var Bo=Kr.object({$type:Kr.string()}),Oo=class extends Error{constructor(e,t,r){super(e),this.schemaDef=t,this.issues=r,this.schemaDef=t,this.issues=r}},Lo=class extends Error{},Mo=class extends Error{},Uo=class extends Error{},Zo=((e,t,r)=>(r=null!=e?o(n(e)):{},d(e&&e.__esModule?r:i(r,"default",{value:e,enumerable:!0}),e)))(l());function zo(e,t){try{Yr(t)}catch{return{success:!1,error:new Lo(`${e} must be a valid did`)}}return{success:!0,value:t}}function Go(e,t){try{Xr(t)}catch{return{success:!1,error:new Lo(`${e} must be a valid handle`)}}return{success:!0,value:t}}function Fo(e,t,r,o){switch(r.type){case"boolean":return Ko(0,t,r,o);case"integer":return Wo(0,t,r,o);case"string":return Ho(0,t,r,o);case"bytes":return Jo(0,t,r,o);case"cid-link":return Xo(0,t,0,o);case"unknown":return Qo(0,t,0,o);default:return{success:!1,error:new Lo(`Unexpected lexicon type: ${r.type}`)}}}function Ko(e,t,r,o){const i=typeof o;return"undefined"===i?"boolean"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Lo(`${t} must be a boolean`)}:"boolean"!==i?{success:!1,error:new Lo(`${t} must be a boolean`)}:"boolean"==typeof r.const&&o!==r.const?{success:!1,error:new Lo(`${t} must be ${r.const}`)}:{success:!0,value:o}}function Wo(e,t,r,o){return void 0===o?"number"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Lo(`${t} must be an integer`)}:Number.isInteger(o)?"number"==typeof r.const&&o!==r.const?{success:!1,error:new Lo(`${t} must be ${r.const}`)}:Array.isArray(r.enum)&&!r.enum.includes(o)?{success:!1,error:new Lo(`${t} must be one of (${r.enum.join("|")})`)}:"number"==typeof r.maximum&&o>r.maximum?{success:!1,error:new Lo(`${t} can not be greater than ${r.maximum}`)}:"number"==typeof r.minimum&&o<r.minimum?{success:!1,error:new Lo(`${t} can not be less than ${r.minimum}`)}:{success:!0,value:o}:{success:!1,error:new Lo(`${t} must be an integer`)}}function Ho(e,t,r,o){if(void 0===o)return"string"==typeof r.default?{success:!0,value:r.default}:{success:!1,error:new Lo(`${t} must be a string`)};if("string"!=typeof o)return{success:!1,error:new Lo(`${t} must be a string`)};if("string"==typeof r.const&&o!==r.const)return{success:!1,error:new Lo(`${t} must be ${r.const}`)};if(Array.isArray(r.enum)&&!r.enum.includes(o))return{success:!1,error:new Lo(`${t} must be one of (${r.enum.join("|")})`)};if("number"==typeof r.maxLength&&Hr(o)>r.maxLength)return{success:!1,error:new Lo(`${t} must not be longer than ${r.maxLength} characters`)};if("number"==typeof r.minLength&&Hr(o)<r.minLength)return{success:!1,error:new Lo(`${t} must not be shorter than ${r.minLength} characters`)};if("number"==typeof r.maxGraphemes&&Jr(o)>r.maxGraphemes)return{success:!1,error:new Lo(`${t} must not be longer than ${r.maxGraphemes} graphemes`)};if("number"==typeof r.minGraphemes&&Jr(o)<r.minGraphemes)return{success:!1,error:new Lo(`${t} must not be shorter than ${r.minGraphemes} graphemes`)};if("string"==typeof r.format)switch(r.format){case"datetime":return function(e,t){try{if(!(0,Zo.isValidISODateString)(t))throw new Error}catch{return{success:!1,error:new Lo(`${e} must be an iso8601 formatted datetime`)}}return{success:!0,value:t}}(t,o);case"uri":return function(e,t){return null!==t.match(/^\w+:(?:\/\/)?[^\s/][^\s]*$/)?{success:!0,value:t}:{success:!1,error:new Lo(`${e} must be a uri`)}}(t,o);case"at-uri":return function(e,t){try{io(t)}catch{return{success:!1,error:new Lo(`${e} must be a valid at-uri`)}}return{success:!0,value:t}}(t,o);case"did":return zo(t,o);case"handle":return Go(t,o);case"at-identifier":return function(e,t){return zo(e,t).success||Go(e,t).success?{success:!0,value:t}:{success:!1,error:new Lo(`${e} must be a valid did or a handle`)}}(t,o);case"nsid":return function(e,t){try{ro(t)}catch{return{success:!1,error:new Lo(`${e} must be a valid nsid`)}}return{success:!0,value:t}}(t,o);case"cid":return function(e,t){try{te.parse(t)}catch{return{success:!1,error:new Lo(`${e} must be a cid string`)}}return{success:!0,value:t}}(t,o)}return{success:!0,value:o}}function Jo(e,t,r,o){return o&&o instanceof Uint8Array?"number"==typeof r.maxLength&&o.byteLength>r.maxLength?{success:!1,error:new Lo(`${t} must not be larger than ${r.maxLength} bytes`)}:"number"==typeof r.minLength&&o.byteLength<r.minLength?{success:!1,error:new Lo(`${t} must not be smaller than ${r.minLength} bytes`)}:{success:!0,value:o}:{success:!1,error:new Lo(`${t} must be a byte array`)}}function Xo(e,t,r,o){return null===te.asCID(o)?{success:!1,error:new Lo(`${t} must be a CID`)}:{success:!0,value:o}}function Qo(e,t,r,o){return o&&"object"==typeof o?{success:!0,value:o}:{success:!1,error:new Lo(`${t} must be an object`)}}var Yo=Kr.object({$type:Kr.literal("blob"),ref:Wr.cid,mimeType:Kr.string(),size:Kr.number()}).strict(),ei=Kr.object({cid:Kr.string(),mimeType:Kr.string()}).strict(),ti=Kr.union([Yo,ei]),ri=class{constructor(e,t,r,o){this.ref=e,this.mimeType=t,this.size=r,this.original=o??{$type:"blob",ref:e,mimeType:t,size:r}}static asBlobRef(e){return m.is(e,ti)?ri.fromJsonRef(e):null}static fromJsonRef(e){return m.is(e,Yo)?new ri(e.ref,e.mimeType,e.size):new ri(te.parse(e.cid),e.mimeType,-1,e)}ipld(){return{$type:"blob",ref:this.ref,mimeType:this.mimeType,size:this.size}}toJSON(){return Ye(this.ipld())}};function oi(e,t,r,o){switch(r.type){case"boolean":return Ko(0,t,r,o);case"integer":return Wo(0,t,r,o);case"string":return Ho(0,t,r,o);case"bytes":return Jo(0,t,r,o);case"cid-link":return Xo(0,t,0,o);case"unknown":return Qo(0,t,0,o);case"object":return si(e,t,r,o);case"array":return ii(e,t,r,o);case"blob":return function(e,t,r,o){return o&&o instanceof ri?{success:!0,value:o}:{success:!1,error:new Lo(`${t} should be a blob ref`)}}(0,t,0,o);default:return{success:!1,error:new Lo(`Unexpected lexicon type: ${r.type}`)}}}function ii(e,t,r,o){if(!Array.isArray(o))return{success:!1,error:new Lo(`${t} must be an array`)};if("number"==typeof r.maxLength&&o.length>r.maxLength)return{success:!1,error:new Lo(`${t} must not have more than ${r.maxLength} elements`)};if("number"==typeof r.minLength&&o.length<r.minLength)return{success:!1,error:new Lo(`${t} must not have fewer than ${r.minLength} elements`)};const i=r.items;for(let r=0;r<o.length;r++){const s=ni(e,`${t}/${r}`,i,o[r]);if(!s.success)return s}return{success:!0,value:o}}function si(e,t,r,o){if(!o||"object"!=typeof o)return{success:!1,error:new Lo(`${t} must be an object`)};const i=new Set(r.required),s=new Set(r.nullable);let a=o;if("object"==typeof r.properties)for(const n in r.properties){if(null===o[n]&&s.has(n))continue;const c=ni(e,`${t}/${n}`,r.properties[n],o[n]),p=c.success?c.value:o[n],d=void 0===p;if(d&&i.has(n))return{success:!1,error:new Lo(`${t} must have the property "${n}"`)};if(!d&&!c.success)return c;p!==o[n]&&(a===o&&(a={...o}),a[n]=p)}return{success:!0,value:a}}function ai(e,t){if(e.startsWith("lex:"))return e;if(e.startsWith("#")){if(!t)throw new Error(`Unable to resolve uri without anchor: ${e}`);return`${t}${e}`}return`lex:${e}`}function ni(e,t,r,o,i=!1){let s,a;if("union"===r.type){if(!function(e){return Bo.safeParse(e).success}(o))return{success:!1,error:new Lo(`${t} must be an object which includes the "$type" property`)};if(!r.refs.includes(ai(o.$type)))return r.closed?{success:!1,error:new Lo(`${t} $type must be one of ${r.refs.join(", ")}`)}:{success:!0,value:o};a=pi(e,{type:"ref",ref:o.$type})}else a=pi(e,r);for(const r of a){const a=i?si(e,t,r,o):oi(e,t,r,o);if(a.success)return a;s??(s=a.error)}return a.length>1?{success:!1,error:new Lo(`${t} did not match any of the expected definitions`)}:{success:!1,error:s}}function ci(e,t,r,o,i=!1){const s=ni(e,t,r,o,i);if(!s.success)throw s.error;return s.value}function pi(e,t){return"ref"===t.type?[e.getDefOrThrow(t.ref)]:"union"===t.type?t.refs.map((t=>e.getDefOrThrow(t))).flat():[t]}var di=class{constructor(e){if(this.docs=new Map,this.defs=new Map,e?.length)for(const t of e)this.add(t)}add(e){try{Vo.parse(e)}catch(t){throw t instanceof ot?new Oo(`Failed to parse schema definition ${e.id}`,e,t.issues):t}const t=e,r=ai(t.id);if(this.docs.has(r))throw new Error(`${r} has already been registered`);ui(t,r),this.docs.set(r,t);for(const[e,r]of li(t))this.defs.set(e,r)}remove(e){e=ai(e);const t=this.docs.get(e);if(!t)throw new Error(`Unable to remove "${e}": does not exist`);for(const[e,r]of li(t))this.defs.delete(e);this.docs.delete(e)}get(e){return e=ai(e),this.docs.get(e)}getDef(e){return e=ai(e),this.defs.get(e)}getDefOrThrow(e,t){const r=this.getDef(e);if(!r)throw new Uo(`Lexicon not found: ${e}`);if(t&&!t.includes(r.type))throw new Mo(`Not a ${t.join(" or ")} lexicon: ${e}`);return r}validate(e,t){e=ai(e);const r=this.getDefOrThrow(e,["record","object"]);if(!No(t))throw new Lo("Value must be an object");if("record"===r.type)return si(this,"Record",r.record,t);if("object"===r.type)return si(this,"Object",r,t);throw new Mo("Definition must be a record or object")}assertValidRecord(e,t){e=ai(e);const r=this.getDefOrThrow(e,["record"]);if(!No(t))throw new Lo("Record must be an object");if(!("$type"in t)||"string"!=typeof t.$type)throw new Lo("Record/$type must be a string");const o=t.$type||"";if(ai(o)!==e)throw new Lo(`Invalid $type: must be ${e}, got ${o}`);return function(e,t,r){const o=si(e,"Record",t.record,r);if(!o.success)throw o.error;return o.value}(this,r,t)}assertValidXrpcParams(e,t){return e=ai(e),function(e,t,r){if(t.parameters){const o=function(e,t,r,o){const i=o&&"object"==typeof o?o:{},s=new Set(r.required??[]);let a=i;if("object"==typeof r.properties)for(const t in r.properties){const o=r.properties[t],n="array"===o.type?ii(e,t,o,i[t]):Fo(0,t,o,i[t]),c=n.success?n.value:i[t],p=void 0===c;if(p&&s.has(t))return{success:!1,error:new Lo(`Params must have the property "${t}"`)};if(!p&&!n.success)return n;c!==i[t]&&(a===i&&(a={...i}),a[t]=c)}return{success:!0,value:a}}(e,0,t.parameters,r);if(!o.success)throw o.error;return o.value}}(this,this.getDefOrThrow(e,["query","procedure","subscription"]),t)}assertValidXrpcInput(e,t){return e=ai(e),function(e,t,r){if(t.input?.schema)return ci(e,"Input",t.input.schema,r,!0)}(this,this.getDefOrThrow(e,["procedure"]),t)}assertValidXrpcOutput(e,t){return e=ai(e),function(e,t,r){if(t.output?.schema)return ci(e,"Output",t.output.schema,r,!0)}(this,this.getDefOrThrow(e,["query","procedure"]),t)}assertValidXrpcMessage(e,t){return e=ai(e),function(e,t,r){if(t.message?.schema)return ci(e,"Message",t.message.schema,r,!0)}(this,this.getDefOrThrow(e,["subscription"]),t)}resolveLexUri(e,t){return e=ai(e),ai(t,e)}};function*li(e){for(const t in e.defs)yield[`lex:${e.id}#${t}`,e.defs[t]],"main"===t&&(yield[`lex:${e.id}`,e.defs[t]])}function ui(e,t){for(const r in e)"ref"===e.type?e.ref=ai(e.ref,t):"union"===e.type?e.refs=e.refs.map((e=>ai(e,t))):Array.isArray(e[r])?e[r]=e[r].map((e=>"string"==typeof e?e.startsWith("#")?ai(e,t):e:e&&"object"==typeof e?ui(e,t):e)):e[r]&&"object"==typeof e[r]&&(e[r]=ui(e[r],t));return e}var mi=e=>{if(Array.isArray(e))return e.map((e=>mi(e)));if(e&&"object"==typeof e){if(e instanceof ri)return e.original;if(te.asCID(e)||e instanceof Uint8Array)return e;const t={};for(const r of Object.keys(e))t[r]=mi(e[r]);return t}return e},yi=e=>{if(Array.isArray(e))return e.map((e=>yi(e)));if(e&&"object"==typeof e){if(("blob"===e.$type||"string"==typeof e.cid&&"string"==typeof e.mimeType)&&m.is(e,ti))return ri.fromJsonRef(e);if(te.asCID(e)||e instanceof Uint8Array)return e;const t={};for(const r of Object.keys(e))t[r]=yi(e[r]);return t}return e},fi=e=>Ye(mi(e)),hi=e=>JSON.stringify(fi(e)),gi=e=>yi(Qe(e)),bi=e=>gi(JSON.parse(e)),vi=Kr.object({error:Kr.string().optional(),message:Kr.string().optional()}),wi=(e=>(e[e.Unknown=1]="Unknown",e[e.InvalidResponse=2]="InvalidResponse",e[e.Success=200]="Success",e[e.InvalidRequest=400]="InvalidRequest",e[e.AuthRequired=401]="AuthRequired",e[e.Forbidden=403]="Forbidden",e[e.XRPCNotSupported=404]="XRPCNotSupported",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.RateLimitExceeded=429]="RateLimitExceeded",e[e.InternalServerError=500]="InternalServerError",e[e.MethodNotImplemented=501]="MethodNotImplemented",e[e.UpstreamFailure=502]="UpstreamFailure",e[e.NotEnoughResouces=503]="NotEnoughResouces",e[e.UpstreamTimeout=504]="UpstreamTimeout",e))(wi||{}),xi={2:"InvalidResponse",200:"Success",400:"InvalidRequest",401:"AuthenticationRequired",403:"Forbidden",404:"XRPCNotSupported",413:"PayloadTooLarge",429:"RateLimitExceeded",500:"InternalServerError",501:"MethodNotImplemented",502:"UpstreamFailure",503:"NotEnoughResouces",504:"UpstreamTimeout"},ki={2:"Invalid Response",200:"Success",400:"Invalid Request",401:"Authentication Required",403:"Forbidden",404:"XRPC Not Supported",413:"Payload Too Large",429:"Rate Limit Exceeded",500:"Internal Server Error",501:"Method Not Implemented",502:"Upstream Failure",503:"Not Enough Resouces",504:"Upstream Timeout"},Ai=class extends Error{constructor(e,t,r){super(r||t||ki[e]),this.status=e,this.error=t,this.success=!1,this.error||(this.error=xi[e])}},_i=class extends Ai{constructor(e,t,r){super(2,ki[2],"The server gave an invalid response and may be out of date."),this.lexiconNsid=e,this.validationError=t,this.responseBody=r}};function ji(e,t){if("string"===e||"unknown"===e)return String(t);if("float"===e)return String(Number(t));if("integer"===e)return String(0|Number(t));if("boolean"===e)return t?"true":"false";if("datetime"===e)return t instanceof Date?t.toISOString():String(t);throw new Error(`Unsupported query param type: ${e}`)}function Si(e,t){if(e["Content-Type"]&&void 0!==t)return t instanceof ArrayBuffer?t:e["Content-Type"].startsWith("text/")?(new TextEncoder).encode(t.toString()):e["Content-Type"].startsWith("application/json")?(new TextEncoder).encode(hi(t)):t}function Ri(e,t){if(e){if(e.includes("application/json")&&t?.byteLength)try{const e=(new TextDecoder).decode(t);return bi(e)}catch(e){throw new Ai(2,`Failed to parse response body: ${String(e)}`)}if(e.startsWith("text/")&&t?.byteLength)try{return(new TextDecoder).decode(t)}catch(e){throw new Ai(2,`Failed to parse response body: ${String(e)}`)}}return t instanceof ArrayBuffer?new Uint8Array(t):t}var Ci=class{constructor(){this.fetch=Ti,this.lex=new di}async call(e,t,r,o,i){return this.service(e).call(t,r,o,i)}service(e){return new Ei(this,e)}addLexicon(e){this.lex.add(e)}addLexicons(e){for(const t of e)this.addLexicon(t)}removeLexicon(e){this.lex.remove(e)}},Ei=class{constructor(e,t){this.headers={},this.baseClient=e,this.uri="string"==typeof t?new URL(t):t}setHeader(e,t){this.headers[e]=t}unsetHeader(e){delete this.headers[e]}async call(e,t,r,o){const i=this.baseClient.lex.getDefOrThrow(e);if(!i||"query"!==i.type&&"procedure"!==i.type)throw new Error(`Invalid lexicon: ${e}. Must be a query or procedure.`);const s="procedure"===i.type?"post":"get",a=function(e,t,r,o){const i=new URL(r);if(i.pathname=`/xrpc/${e}`,o)for(const[e,r]of Object.entries(o)){const o=t.parameters?.properties?.[e];if(!o)throw new Error(`Invalid query parameter: ${e}`);void 0!==r&&("array"===o.type?[].concat(r).forEach((t=>{i.searchParams.append(e,ji(o.items.type,t))})):i.searchParams.set(e,ji(o.type,r)))}return i.toString()}(e,i,this.uri,t),n=function(e,t,r){const o=r?.headers||{};return"procedure"===e.type&&(r?.encoding&&(o["Content-Type"]=r.encoding),t&&"object"==typeof t&&(o["Content-Type"]||(o["Content-Type"]="application/json"))),o}(i,r,{headers:{...this.headers,...o?.headers},encoding:o?.encoding}),c=await this.baseClient.fetch(a,s,n,r),p=function(e){let t;return t=e in wi?e:e>=100&&e<200?404:e>=200&&e<300?200:e>=300&&e<400?404:e>=400&&e<500?400:500,t}(c.status);if(200===p){try{this.baseClient.lex.assertValidXrpcOutput(e,c.body)}catch(t){throw t instanceof Lo?new _i(e,t,c.body):t}return new class{constructor(e,t){this.data=e,this.headers=t,this.success=!0}}(c.body,c.headers)}throw c.body&&(d=c.body,vi.safeParse(d).success)?new Ai(p,c.body.error,c.body.message):new Ai(p);var d}};async function Ti(e,t,r,o){try{const i={method:t,headers:r,body:Si(r,o),duplex:"half"},s=await fetch(e,i),a=await s.arrayBuffer();return{status:s.status,headers:Object.fromEntries(s.headers.entries()),body:Ri(s.headers.get("content-type"),a)}}catch(e){throw new Ai(1,String(e))}}new Ci;var $i=Object.values({ComAtprotoAdminDefs:{lexicon:1,id:"com.atproto.admin.defs",defs:{actionView:{type:"object",required:["id","action","subject","subjectBlobCids","reason","createdBy","createdAt","resolvedReportIds"],properties:{id:{type:"integer"},action:{type:"ref",ref:"lex:com.atproto.admin.defs#actionType"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string"}},createLabelVals:{type:"array",items:{type:"string"}},negateLabelVals:{type:"array",items:{type:"string"}},reason:{type:"string"},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},reversal:{type:"ref",ref:"lex:com.atproto.admin.defs#actionReversal"},resolvedReportIds:{type:"array",items:{type:"integer"}}}},actionViewDetail:{type:"object",required:["id","action","subject","subjectBlobs","reason","createdBy","createdAt","resolvedReports"],properties:{id:{type:"integer"},action:{type:"ref",ref:"lex:com.atproto.admin.defs#actionType"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoView","lex:com.atproto.admin.defs#recordView"]},subjectBlobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#blobView"}},createLabelVals:{type:"array",items:{type:"string"}},negateLabelVals:{type:"array",items:{type:"string"}},reason:{type:"string"},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},reversal:{type:"ref",ref:"lex:com.atproto.admin.defs#actionReversal"},resolvedReports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#reportView"}}}},actionViewCurrent:{type:"object",required:["id","action"],properties:{id:{type:"integer"},action:{type:"ref",ref:"lex:com.atproto.admin.defs#actionType"}}},actionReversal:{type:"object",required:["reason","createdBy","createdAt"],properties:{reason:{type:"string"},createdBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}},actionType:{type:"string",knownValues:["lex:com.atproto.admin.defs#takedown","lex:com.atproto.admin.defs#flag","lex:com.atproto.admin.defs#acknowledge"]},takedown:{type:"token",description:"Moderation action type: Takedown. Indicates that content should not be served by the PDS."},flag:{type:"token",description:"Moderation action type: Flag. Indicates that the content was reviewed and considered to violate PDS rules, but may still be served."},acknowledge:{type:"token",description:"Moderation action type: Acknowledge. Indicates that the content was reviewed and not considered to violate PDS rules."},reportView:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt","resolvedByActionIds"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},resolvedByActionIds:{type:"array",items:{type:"integer"}}}},reportViewDetail:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt","resolvedByActions"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoView","lex:com.atproto.admin.defs#recordView"]},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"},resolvedByActions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#actionView"}}}},repoView:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderation"},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}},repoViewDetail:{type:"object",required:["did","handle","relatedRecords","indexedAt","moderation"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},email:{type:"string"},relatedRecords:{type:"array",items:{type:"unknown"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderationDetail"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},invitedBy:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"},invites:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}},repoRef:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}},recordView:{type:"object",required:["uri","cid","value","blobCids","indexedAt","moderation","repo"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"},blobCids:{type:"array",items:{type:"string",format:"cid"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderation"},repo:{type:"ref",ref:"lex:com.atproto.admin.defs#repoView"}}},recordViewDetail:{type:"object",required:["uri","cid","value","blobs","indexedAt","moderation","repo"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"},blobs:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#blobView"}},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},indexedAt:{type:"string",format:"datetime"},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderationDetail"},repo:{type:"ref",ref:"lex:com.atproto.admin.defs#repoView"}}},moderation:{type:"object",required:[],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.defs#actionViewCurrent"}}},moderationDetail:{type:"object",required:["actions","reports"],properties:{currentAction:{type:"ref",ref:"lex:com.atproto.admin.defs#actionViewCurrent"},actions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#actionView"}},reports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#reportView"}}}},blobView:{type:"object",required:["cid","mimeType","size","createdAt"],properties:{cid:{type:"string",format:"cid"},mimeType:{type:"string"},size:{type:"integer"},createdAt:{type:"string",format:"datetime"},details:{type:"union",refs:["lex:com.atproto.admin.defs#imageDetails","lex:com.atproto.admin.defs#videoDetails"]},moderation:{type:"ref",ref:"lex:com.atproto.admin.defs#moderation"}}},imageDetails:{type:"object",required:["width","height"],properties:{width:{type:"integer"},height:{type:"integer"}}},videoDetails:{type:"object",required:["width","height","length"],properties:{width:{type:"integer"},height:{type:"integer"},length:{type:"integer"}}}}},ComAtprotoAdminDisableInviteCodes:{lexicon:1,id:"com.atproto.admin.disableInviteCodes",defs:{main:{type:"procedure",description:"Disable some set of codes and/or all codes associated with a set of users",input:{encoding:"application/json",schema:{type:"object",properties:{codes:{type:"array",items:{type:"string"}},accounts:{type:"array",items:{type:"string"}}}}}}}},ComAtprotoAdminGetInviteCodes:{lexicon:1,id:"com.atproto.admin.getInviteCodes",defs:{main:{type:"query",description:"Admin view of invite codes",parameters:{type:"params",properties:{sort:{type:"string",knownValues:["recent","usage"],default:"recent"},limit:{type:"integer",minimum:1,maximum:500,default:100},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{cursor:{type:"string"},codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}}}}}},ComAtprotoAdminGetModerationAction:{lexicon:1,id:"com.atproto.admin.getModerationAction",defs:{main:{type:"query",description:"View details about a moderation action.",parameters:{type:"params",required:["id"],properties:{id:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#actionViewDetail"}}}}},ComAtprotoAdminGetModerationActions:{lexicon:1,id:"com.atproto.admin.getModerationActions",defs:{main:{type:"query",description:"List moderation actions related to a subject.",parameters:{type:"params",properties:{subject:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actions"],properties:{cursor:{type:"string"},actions:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#actionView"}}}}}}}},ComAtprotoAdminGetModerationReport:{lexicon:1,id:"com.atproto.admin.getModerationReport",defs:{main:{type:"query",description:"View details about a moderation report.",parameters:{type:"params",required:["id"],properties:{id:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#reportViewDetail"}}}}},ComAtprotoAdminGetModerationReports:{lexicon:1,id:"com.atproto.admin.getModerationReports",defs:{main:{type:"query",description:"List moderation reports related to a subject.",parameters:{type:"params",properties:{subject:{type:"string"},resolved:{type:"boolean"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["reports"],properties:{cursor:{type:"string"},reports:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#reportView"}}}}}}}},ComAtprotoAdminGetRecord:{lexicon:1,id:"com.atproto.admin.getRecord",defs:{main:{type:"query",description:"View details about a record.",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#recordViewDetail"}}}}},ComAtprotoAdminGetRepo:{lexicon:1,id:"com.atproto.admin.getRepo",defs:{main:{type:"query",description:"View details about a repository.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#repoViewDetail"}}}}},ComAtprotoAdminResolveModerationReports:{lexicon:1,id:"com.atproto.admin.resolveModerationReports",defs:{main:{type:"procedure",description:"Resolve moderation reports by an action.",input:{encoding:"application/json",schema:{type:"object",required:["actionId","reportIds","createdBy"],properties:{actionId:{type:"integer"},reportIds:{type:"array",items:{type:"integer"}},createdBy:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#actionView"}}}}},ComAtprotoAdminReverseModerationAction:{lexicon:1,id:"com.atproto.admin.reverseModerationAction",defs:{main:{type:"procedure",description:"Reverse a moderation action.",input:{encoding:"application/json",schema:{type:"object",required:["id","reason","createdBy"],properties:{id:{type:"integer"},reason:{type:"string"},createdBy:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#actionView"}}}}},ComAtprotoAdminSearchRepos:{lexicon:1,id:"com.atproto.admin.searchRepos",defs:{main:{type:"query",description:"Find repositories based on a search term.",parameters:{type:"params",properties:{term:{type:"string"},invitedBy:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.admin.defs#repoView"}}}}}}}},ComAtprotoAdminTakeModerationAction:{lexicon:1,id:"com.atproto.admin.takeModerationAction",defs:{main:{type:"procedure",description:"Take a moderation action on a repo.",input:{encoding:"application/json",schema:{type:"object",required:["action","subject","reason","createdBy"],properties:{action:{type:"string",knownValues:["com.atproto.admin.defs#takedown","com.atproto.admin.defs#flag","com.atproto.admin.defs#acknowledge"]},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},subjectBlobCids:{type:"array",items:{type:"string",format:"cid"}},createLabelVals:{type:"array",items:{type:"string"}},negateLabelVals:{type:"array",items:{type:"string"}},reason:{type:"string"},createdBy:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.admin.defs#actionView"}},errors:[{name:"SubjectHasAction"}]}}},ComAtprotoAdminUpdateAccountEmail:{lexicon:1,id:"com.atproto.admin.updateAccountEmail",defs:{main:{type:"procedure",description:"Administrative action to update an account's email",input:{encoding:"application/json",schema:{type:"object",required:["account","email"],properties:{account:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},email:{type:"string"}}}}}}},ComAtprotoAdminUpdateAccountHandle:{lexicon:1,id:"com.atproto.admin.updateAccountHandle",defs:{main:{type:"procedure",description:"Administrative action to update an account's handle",input:{encoding:"application/json",schema:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"}}}}}}},ComAtprotoIdentityResolveHandle:{lexicon:1,id:"com.atproto.identity.resolveHandle",defs:{main:{type:"query",description:"Provides the DID of a repo.",parameters:{type:"params",properties:{handle:{type:"string",format:"handle",description:"The handle to resolve. If not supplied, will resolve the host's own handle."}}},output:{encoding:"application/json",schema:{type:"object",required:["did"],properties:{did:{type:"string",format:"did"}}}}}}},ComAtprotoIdentityUpdateHandle:{lexicon:1,id:"com.atproto.identity.updateHandle",defs:{main:{type:"procedure",description:"Updates the handle of the account",input:{encoding:"application/json",schema:{type:"object",required:["handle"],properties:{handle:{type:"string",format:"handle"}}}}}}},ComAtprotoLabelDefs:{lexicon:1,id:"com.atproto.label.defs",defs:{label:{type:"object",description:"Metadata tag on an atproto resource (eg, repo or record)",required:["src","uri","val","cts"],properties:{src:{type:"string",format:"did",description:"DID of the actor who created this label"},uri:{type:"string",format:"uri",description:"AT URI of the record, repository (account), or other resource which this label applies to"},cid:{type:"string",format:"cid",description:"optionally, CID specifying the specific version of 'uri' resource this label applies to"},val:{type:"string",maxLength:128,description:"the short string name of the value or type of this label"},neg:{type:"boolean",description:"if true, this is a negation label, overwriting a previous label"},cts:{type:"string",format:"datetime",description:"timestamp when this label was created"}}}}},ComAtprotoLabelQueryLabels:{lexicon:1,id:"com.atproto.label.queryLabels",defs:{main:{type:"query",description:"Find labels relevant to the provided URI patterns.",parameters:{type:"params",required:["uriPatterns"],properties:{uriPatterns:{type:"array",items:{type:"string"},description:"List of AT URI patterns to match (boolean 'OR'). Each may be a prefix (ending with '*'; will match inclusive of the string leading to '*'), or a full URI"},sources:{type:"array",items:{type:"string",format:"did"},description:"Optional list of label sources (DIDs) to filter on"},limit:{type:"integer",minimum:1,maximum:250,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["labels"],properties:{cursor:{type:"string"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}}}},ComAtprotoLabelSubscribeLabels:{lexicon:1,id:"com.atproto.label.subscribeLabels",defs:{main:{type:"subscription",description:"Subscribe to label updates",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event to backfill from."}}},message:{schema:{type:"union",refs:["lex:com.atproto.label.subscribeLabels#labels","lex:com.atproto.label.subscribeLabels#info"]}},errors:[{name:"FutureCursor"}]},labels:{type:"object",required:["seq","labels"],properties:{seq:{type:"integer"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},info:{type:"object",required:["name"],properties:{name:{type:"string",knownValues:["OutdatedCursor"]},message:{type:"string"}}}}},ComAtprotoModerationCreateReport:{lexicon:1,id:"com.atproto.moderation.createReport",defs:{main:{type:"procedure",description:"Report a repo or a record.",input:{encoding:"application/json",schema:{type:"object",required:["reasonType","subject"],properties:{reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]}}}},output:{encoding:"application/json",schema:{type:"object",required:["id","reasonType","subject","reportedBy","createdAt"],properties:{id:{type:"integer"},reasonType:{type:"ref",ref:"lex:com.atproto.moderation.defs#reasonType"},reason:{type:"string"},subject:{type:"union",refs:["lex:com.atproto.admin.defs#repoRef","lex:com.atproto.repo.strongRef"]},reportedBy:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}}},ComAtprotoModerationDefs:{lexicon:1,id:"com.atproto.moderation.defs",defs:{reasonType:{type:"string",knownValues:["com.atproto.moderation.defs#reasonSpam","com.atproto.moderation.defs#reasonViolation","com.atproto.moderation.defs#reasonMisleading","com.atproto.moderation.defs#reasonSexual","com.atproto.moderation.defs#reasonRude","com.atproto.moderation.defs#reasonOther"]},reasonSpam:{type:"token",description:"Spam: frequent unwanted promotion, replies, mentions"},reasonViolation:{type:"token",description:"Direct violation of server rules, laws, terms of service"},reasonMisleading:{type:"token",description:"Misleading identity, affiliation, or content"},reasonSexual:{type:"token",description:"Unwanted or mis-labeled sexual content"},reasonRude:{type:"token",description:"Rude, harassing, explicit, or otherwise unwelcoming behavior"},reasonOther:{type:"token",description:"Other: reports not falling under another report category"}}},ComAtprotoRepoApplyWrites:{lexicon:1,id:"com.atproto.repo.applyWrites",defs:{main:{type:"procedure",description:"Apply a batch transaction of creates, updates, and deletes.",input:{encoding:"application/json",schema:{type:"object",required:["repo","writes"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},validate:{type:"boolean",default:!0,description:"Validate the records?"},writes:{type:"array",items:{type:"union",refs:["lex:com.atproto.repo.applyWrites#create","lex:com.atproto.repo.applyWrites#update","lex:com.atproto.repo.applyWrites#delete"],closed:!0}},swapCommit:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]},create:{type:"object",description:"Create a new record.",required:["action","collection","value"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"},value:{type:"unknown"}}},update:{type:"object",description:"Update an existing record.",required:["action","collection","rkey","value"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"},value:{type:"unknown"}}},delete:{type:"object",description:"Delete an existing record.",required:["action","collection","rkey"],properties:{collection:{type:"string",format:"nsid"},rkey:{type:"string"}}}}},ComAtprotoRepoCreateRecord:{lexicon:1,id:"com.atproto.repo.createRecord",defs:{main:{type:"procedure",description:"Create a new record.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","record"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."},validate:{type:"boolean",default:!0,description:"Validate the record?"},record:{type:"unknown",description:"The record to create."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by cid."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoDeleteRecord:{lexicon:1,id:"com.atproto.repo.deleteRecord",defs:{main:{type:"procedure",description:"Delete a record, or ensure it doesn't exist.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","rkey"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."},swapRecord:{type:"string",format:"cid",description:"Compare and swap with the previous record by cid."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by cid."}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoDescribeRepo:{lexicon:1,id:"com.atproto.repo.describeRepo",defs:{main:{type:"query",description:"Get information about the repo, including the list of collections.",parameters:{type:"params",required:["repo"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["handle","did","didDoc","collections","handleIsCorrect"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},didDoc:{type:"unknown"},collections:{type:"array",items:{type:"string",format:"nsid"}},handleIsCorrect:{type:"boolean"}}}}}}},ComAtprotoRepoGetRecord:{lexicon:1,id:"com.atproto.repo.getRecord",defs:{main:{type:"query",description:"Get a record.",parameters:{type:"params",required:["repo","collection","rkey"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."},cid:{type:"string",format:"cid",description:"The CID of the version of the record. If not specified, then return the most recent version."}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","value"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"}}}}}}},ComAtprotoRepoListRecords:{lexicon:1,id:"com.atproto.repo.listRecords",defs:{main:{type:"query",description:"List a range of records in a collection.",parameters:{type:"params",required:["repo","collection"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record type."},limit:{type:"integer",minimum:1,maximum:100,default:50,description:"The number of records to return."},cursor:{type:"string"},rkeyStart:{type:"string",description:"DEPRECATED: The lowest sort-ordered rkey to start from (exclusive)"},rkeyEnd:{type:"string",description:"DEPRECATED: The highest sort-ordered rkey to stop at (exclusive)"},reverse:{type:"boolean",description:"Reverse the order of the returned records?"}}},output:{encoding:"application/json",schema:{type:"object",required:["records"],properties:{cursor:{type:"string"},records:{type:"array",items:{type:"ref",ref:"lex:com.atproto.repo.listRecords#record"}}}}}},record:{type:"object",required:["uri","cid","value"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},value:{type:"unknown"}}}}},ComAtprotoRepoPutRecord:{lexicon:1,id:"com.atproto.repo.putRecord",defs:{main:{type:"procedure",description:"Write a record, creating or updating it as needed.",input:{encoding:"application/json",schema:{type:"object",required:["repo","collection","rkey","record"],nullable:["swapRecord"],properties:{repo:{type:"string",format:"at-identifier",description:"The handle or DID of the repo."},collection:{type:"string",format:"nsid",description:"The NSID of the record collection."},rkey:{type:"string",description:"The key of the record."},validate:{type:"boolean",default:!0,description:"Validate the record?"},record:{type:"unknown",description:"The record to write."},swapRecord:{type:"string",format:"cid",description:"Compare and swap with the previous record by cid."},swapCommit:{type:"string",format:"cid",description:"Compare and swap with the previous commit by cid."}}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}},errors:[{name:"InvalidSwap"}]}}},ComAtprotoRepoStrongRef:{lexicon:1,id:"com.atproto.repo.strongRef",description:"A URI with a content-hash fingerprint.",defs:{main:{type:"object",required:["uri","cid"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"}}}}},ComAtprotoRepoUploadBlob:{lexicon:1,id:"com.atproto.repo.uploadBlob",defs:{main:{type:"procedure",description:"Upload a new blob to be added to repo in a later request.",input:{encoding:"*/*"},output:{encoding:"application/json",schema:{type:"object",required:["blob"],properties:{blob:{type:"blob"}}}}}}},ComAtprotoServerCreateAccount:{lexicon:1,id:"com.atproto.server.createAccount",defs:{main:{type:"procedure",description:"Create an account.",input:{encoding:"application/json",schema:{type:"object",required:["handle","email","password"],properties:{email:{type:"string"},handle:{type:"string",format:"handle"},inviteCode:{type:"string"},password:{type:"string"},recoveryKey:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"}}}},errors:[{name:"InvalidHandle"},{name:"InvalidPassword"},{name:"InvalidInviteCode"},{name:"HandleNotAvailable"},{name:"UnsupportedDomain"}]}}},ComAtprotoServerCreateAppPassword:{lexicon:1,id:"com.atproto.server.createAppPassword",defs:{main:{type:"procedure",description:"Create an app-specific password.",input:{encoding:"application/json",schema:{type:"object",required:["name"],properties:{name:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:com.atproto.server.createAppPassword#appPassword"}},errors:[{name:"AccountTakedown"}]},appPassword:{type:"object",required:["name","password","createdAt"],properties:{name:{type:"string"},password:{type:"string"},createdAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerCreateInviteCode:{lexicon:1,id:"com.atproto.server.createInviteCode",defs:{main:{type:"procedure",description:"Create an invite code.",input:{encoding:"application/json",schema:{type:"object",required:["useCount"],properties:{useCount:{type:"integer"},forAccount:{type:"string",format:"did"}}}},output:{encoding:"application/json",schema:{type:"object",required:["code"],properties:{code:{type:"string"}}}}}}},ComAtprotoServerCreateInviteCodes:{lexicon:1,id:"com.atproto.server.createInviteCodes",defs:{main:{type:"procedure",description:"Create an invite code.",input:{encoding:"application/json",schema:{type:"object",required:["codeCount","useCount"],properties:{codeCount:{type:"integer",default:1},useCount:{type:"integer"},forAccounts:{type:"array",items:{type:"string",format:"did"}}}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.createInviteCodes#accountCodes"}}}}}},accountCodes:{type:"object",required:["account","codes"],properties:{account:{type:"string"},codes:{type:"array",items:{type:"string"}}}}}},ComAtprotoServerCreateSession:{lexicon:1,id:"com.atproto.server.createSession",defs:{main:{type:"procedure",description:"Create an authentication session.",input:{encoding:"application/json",schema:{type:"object",required:["identifier","password"],properties:{identifier:{type:"string",description:"Handle or other identifier supported by the server for the authenticating user."},password:{type:"string"}}}},output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},email:{type:"string"}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoServerDefs:{lexicon:1,id:"com.atproto.server.defs",defs:{inviteCode:{type:"object",required:["code","available","disabled","forAccount","createdBy","createdAt","uses"],properties:{code:{type:"string"},available:{type:"integer"},disabled:{type:"boolean"},forAccount:{type:"string"},createdBy:{type:"string"},createdAt:{type:"string",format:"datetime"},uses:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCodeUse"}}}},inviteCodeUse:{type:"object",required:["usedBy","usedAt"],properties:{usedBy:{type:"string",format:"did"},usedAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerDeleteAccount:{lexicon:1,id:"com.atproto.server.deleteAccount",defs:{main:{type:"procedure",description:"Delete a user account with a token and password.",input:{encoding:"application/json",schema:{type:"object",required:["did","password","token"],properties:{did:{type:"string",format:"did"},password:{type:"string"},token:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoServerDeleteSession:{lexicon:1,id:"com.atproto.server.deleteSession",defs:{main:{type:"procedure",description:"Delete the current session."}}},ComAtprotoServerDescribeServer:{lexicon:1,id:"com.atproto.server.describeServer",defs:{main:{type:"query",description:"Get a document describing the service's accounts configuration.",output:{encoding:"application/json",schema:{type:"object",required:["availableUserDomains"],properties:{inviteCodeRequired:{type:"boolean"},availableUserDomains:{type:"array",items:{type:"string"}},links:{type:"ref",ref:"lex:com.atproto.server.describeServer#links"}}}}},links:{type:"object",properties:{privacyPolicy:{type:"string"},termsOfService:{type:"string"}}}}},ComAtprotoServerGetAccountInviteCodes:{lexicon:1,id:"com.atproto.server.getAccountInviteCodes",defs:{main:{type:"query",description:"Get all invite codes for a given account",parameters:{type:"params",properties:{includeUsed:{type:"boolean",default:!0},createAvailable:{type:"boolean",default:!0}}},output:{encoding:"application/json",schema:{type:"object",required:["codes"],properties:{codes:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.defs#inviteCode"}}}}},errors:[{name:"DuplicateCreate"}]}}},ComAtprotoServerGetSession:{lexicon:1,id:"com.atproto.server.getSession",defs:{main:{type:"query",description:"Get information about the current session.",output:{encoding:"application/json",schema:{type:"object",required:["handle","did"],properties:{handle:{type:"string",format:"handle"},did:{type:"string",format:"did"},email:{type:"string"}}}}}}},ComAtprotoServerListAppPasswords:{lexicon:1,id:"com.atproto.server.listAppPasswords",defs:{main:{type:"query",description:"List all app-specific passwords.",output:{encoding:"application/json",schema:{type:"object",required:["passwords"],properties:{passwords:{type:"array",items:{type:"ref",ref:"lex:com.atproto.server.listAppPasswords#appPassword"}}}}},errors:[{name:"AccountTakedown"}]},appPassword:{type:"object",required:["name","createdAt"],properties:{name:{type:"string"},createdAt:{type:"string",format:"datetime"}}}}},ComAtprotoServerRefreshSession:{lexicon:1,id:"com.atproto.server.refreshSession",defs:{main:{type:"procedure",description:"Refresh an authentication session.",output:{encoding:"application/json",schema:{type:"object",required:["accessJwt","refreshJwt","handle","did"],properties:{accessJwt:{type:"string"},refreshJwt:{type:"string"},handle:{type:"string",format:"handle"},did:{type:"string",format:"did"}}}},errors:[{name:"AccountTakedown"}]}}},ComAtprotoServerRequestAccountDelete:{lexicon:1,id:"com.atproto.server.requestAccountDelete",defs:{main:{type:"procedure",description:"Initiate a user account deletion via email."}}},ComAtprotoServerRequestPasswordReset:{lexicon:1,id:"com.atproto.server.requestPasswordReset",defs:{main:{type:"procedure",description:"Initiate a user account password reset via email.",input:{encoding:"application/json",schema:{type:"object",required:["email"],properties:{email:{type:"string"}}}}}}},ComAtprotoServerResetPassword:{lexicon:1,id:"com.atproto.server.resetPassword",defs:{main:{type:"procedure",description:"Reset a user account password using a token.",input:{encoding:"application/json",schema:{type:"object",required:["token","password"],properties:{token:{type:"string"},password:{type:"string"}}}},errors:[{name:"ExpiredToken"},{name:"InvalidToken"}]}}},ComAtprotoServerRevokeAppPassword:{lexicon:1,id:"com.atproto.server.revokeAppPassword",defs:{main:{type:"procedure",description:"Revoke an app-specific password by name.",input:{encoding:"application/json",schema:{type:"object",required:["name"],properties:{name:{type:"string"}}}}}}},ComAtprotoSyncGetBlob:{lexicon:1,id:"com.atproto.sync.getBlob",defs:{main:{type:"query",description:"Get a blob associated with a given repo.",parameters:{type:"params",required:["did","cid"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},cid:{type:"string",format:"cid",description:"The CID of the blob to fetch"}}},output:{encoding:"*/*"}}}},ComAtprotoSyncGetBlocks:{lexicon:1,id:"com.atproto.sync.getBlocks",defs:{main:{type:"query",description:"Gets blocks from a given repo.",parameters:{type:"params",required:["did","cids"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},cids:{type:"array",items:{type:"string",format:"cid"}}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetCheckout:{lexicon:1,id:"com.atproto.sync.getCheckout",defs:{main:{type:"query",description:"Gets the repo state.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},commit:{type:"string",format:"cid",description:"The commit to get the checkout from. Defaults to current HEAD."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetCommitPath:{lexicon:1,id:"com.atproto.sync.getCommitPath",defs:{main:{type:"query",description:"Gets the path of repo commits",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},latest:{type:"string",format:"cid",description:"The most recent commit"},earliest:{type:"string",format:"cid",description:"The earliest commit to start from"}}},output:{encoding:"application/json",schema:{type:"object",required:["commits"],properties:{commits:{type:"array",items:{type:"string",format:"cid"}}}}}}}},ComAtprotoSyncGetHead:{lexicon:1,id:"com.atproto.sync.getHead",defs:{main:{type:"query",description:"Gets the current HEAD CID of a repo.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."}}},output:{encoding:"application/json",schema:{type:"object",required:["root"],properties:{root:{type:"string",format:"cid"}}}}}}},ComAtprotoSyncGetRecord:{lexicon:1,id:"com.atproto.sync.getRecord",defs:{main:{type:"query",description:"Gets blocks needed for existence or non-existence of record.",parameters:{type:"params",required:["did","collection","rkey"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},collection:{type:"string",format:"nsid"},rkey:{type:"string"},commit:{type:"string",format:"cid",description:"An optional past commit CID."}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncGetRepo:{lexicon:1,id:"com.atproto.sync.getRepo",defs:{main:{type:"query",description:"Gets the repo state.",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},earliest:{type:"string",format:"cid",description:"The earliest commit in the commit range (not inclusive)"},latest:{type:"string",format:"cid",description:"The latest commit in the commit range (inclusive)"}}},output:{encoding:"application/vnd.ipld.car"}}}},ComAtprotoSyncListBlobs:{lexicon:1,id:"com.atproto.sync.listBlobs",defs:{main:{type:"query",description:"List blob cids for some range of commits",parameters:{type:"params",required:["did"],properties:{did:{type:"string",format:"did",description:"The DID of the repo."},latest:{type:"string",format:"cid",description:"The most recent commit"},earliest:{type:"string",format:"cid",description:"The earliest commit to start from"}}},output:{encoding:"application/json",schema:{type:"object",required:["cids"],properties:{cids:{type:"array",items:{type:"string",format:"cid"}}}}}}}},ComAtprotoSyncListRepos:{lexicon:1,id:"com.atproto.sync.listRepos",defs:{main:{type:"query",description:"List dids and root cids of hosted repos",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:1e3,default:500},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["repos"],properties:{cursor:{type:"string"},repos:{type:"array",items:{type:"ref",ref:"lex:com.atproto.sync.listRepos#repo"}}}}}},repo:{type:"object",required:["did","head"],properties:{did:{type:"string",format:"did"},head:{type:"string",format:"cid"}}}}},ComAtprotoSyncNotifyOfUpdate:{lexicon:1,id:"com.atproto.sync.notifyOfUpdate",defs:{main:{type:"query",description:"Notify a crawling service of a recent update. Often when a long break between updates causes the connection with the crawling service to break.",parameters:{type:"params",required:["hostname"],properties:{hostname:{type:"string",description:"Hostname of the service that is notifying of update."}}}}}},ComAtprotoSyncRequestCrawl:{lexicon:1,id:"com.atproto.sync.requestCrawl",defs:{main:{type:"query",description:"Request a service to persistently crawl hosted repos.",parameters:{type:"params",required:["hostname"],properties:{hostname:{type:"string",description:"Hostname of the service that is requesting to be crawled."}}}}}},ComAtprotoSyncSubscribeRepos:{lexicon:1,id:"com.atproto.sync.subscribeRepos",defs:{main:{type:"subscription",description:"Subscribe to repo updates",parameters:{type:"params",properties:{cursor:{type:"integer",description:"The last known event to backfill from."}}},message:{schema:{type:"union",refs:["lex:com.atproto.sync.subscribeRepos#commit","lex:com.atproto.sync.subscribeRepos#handle","lex:com.atproto.sync.subscribeRepos#migrate","lex:com.atproto.sync.subscribeRepos#tombstone","lex:com.atproto.sync.subscribeRepos#info"]}},errors:[{name:"FutureCursor"}]},commit:{type:"object",required:["seq","rebase","tooBig","repo","commit","prev","blocks","ops","blobs","time"],nullable:["prev"],properties:{seq:{type:"integer"},rebase:{type:"boolean"},tooBig:{type:"boolean"},repo:{type:"string",format:"did"},commit:{type:"cid-link"},prev:{type:"cid-link"},blocks:{type:"bytes",description:"CAR file containing relevant blocks",maxLength:1e6},ops:{type:"array",items:{type:"ref",ref:"lex:com.atproto.sync.subscribeRepos#repoOp"},maxLength:200},blobs:{type:"array",items:{type:"cid-link"}},time:{type:"string",format:"datetime"}}},handle:{type:"object",required:["seq","did","handle","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},time:{type:"string",format:"datetime"}}},migrate:{type:"object",required:["seq","did","migrateTo","time"],nullable:["migrateTo"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},migrateTo:{type:"string"},time:{type:"string",format:"datetime"}}},tombstone:{type:"object",required:["seq","did","time"],properties:{seq:{type:"integer"},did:{type:"string",format:"did"},time:{type:"string",format:"datetime"}}},info:{type:"object",required:["name"],properties:{name:{type:"string",knownValues:["OutdatedCursor"]},message:{type:"string"}}},repoOp:{type:"object",required:["action","path","cid"],nullable:["cid"],properties:{action:{type:"string",knownValues:["create","update","delete"]},path:{type:"string"},cid:{type:"cid-link"}}}}},AppBskyActorDefs:{lexicon:1,id:"app.bsky.actor.defs",description:"A reference to an actor in the network.",defs:{profileViewBasic:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},avatar:{type:"string"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},profileView:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"string"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},profileViewDetailed:{type:"object",required:["did","handle"],properties:{did:{type:"string",format:"did"},handle:{type:"string",format:"handle"},displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"string"},banner:{type:"string"},followersCount:{type:"integer"},followsCount:{type:"integer"},postsCount:{type:"integer"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.actor.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},viewerState:{type:"object",properties:{muted:{type:"boolean"},blockedBy:{type:"boolean"},blocking:{type:"string",format:"at-uri"},following:{type:"string",format:"at-uri"},followedBy:{type:"string",format:"at-uri"}}}}},AppBskyActorGetProfile:{lexicon:1,id:"app.bsky.actor.getProfile",defs:{main:{type:"query",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}},output:{encoding:"application/json",schema:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"}}}}},AppBskyActorGetProfiles:{lexicon:1,id:"app.bsky.actor.getProfiles",defs:{main:{type:"query",parameters:{type:"params",required:["actors"],properties:{actors:{type:"array",items:{type:"string",format:"at-identifier"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["profiles"],properties:{profiles:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewDetailed"}}}}}}}},AppBskyActorGetSuggestions:{lexicon:1,id:"app.bsky.actor.getSuggestions",defs:{main:{type:"query",description:"Get a list of actors suggested for following. Used in discovery UIs.",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyActorProfile:{lexicon:1,id:"app.bsky.actor.profile",defs:{main:{type:"record",key:"literal:self",record:{type:"object",properties:{displayName:{type:"string",maxGraphemes:64,maxLength:640},description:{type:"string",maxGraphemes:256,maxLength:2560},avatar:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6},banner:{type:"blob",accept:["image/png","image/jpeg"],maxSize:1e6}}}}}},AppBskyActorSearchActors:{lexicon:1,id:"app.bsky.actor.searchActors",defs:{main:{type:"query",description:"Find actors matching search criteria.",parameters:{type:"params",properties:{term:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{cursor:{type:"string"},actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyActorSearchActorsTypeahead:{lexicon:1,id:"app.bsky.actor.searchActorsTypeahead",defs:{main:{type:"query",description:"Find actor suggestions for a search term.",parameters:{type:"params",properties:{term:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50}}},output:{encoding:"application/json",schema:{type:"object",required:["actors"],properties:{actors:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"}}}}}}}},AppBskyEmbedExternal:{lexicon:1,id:"app.bsky.embed.external",description:"A representation of some externally linked content, embedded in another form of content",defs:{main:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#external"}}},external:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},thumb:{type:"blob",accept:["image/*"],maxSize:1e6}}},view:{type:"object",required:["external"],properties:{external:{type:"ref",ref:"lex:app.bsky.embed.external#viewExternal"}}},viewExternal:{type:"object",required:["uri","title","description"],properties:{uri:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},thumb:{type:"string"}}}}},AppBskyEmbedImages:{lexicon:1,id:"app.bsky.embed.images",description:"A set of images embedded in some other form of content",defs:{main:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#image"},maxLength:4}}},image:{type:"object",required:["image","alt"],properties:{image:{type:"blob",accept:["image/*"],maxSize:1e6},alt:{type:"string"}}},view:{type:"object",required:["images"],properties:{images:{type:"array",items:{type:"ref",ref:"lex:app.bsky.embed.images#viewImage"},maxLength:4}}},viewImage:{type:"object",required:["thumb","fullsize","alt"],properties:{thumb:{type:"string"},fullsize:{type:"string"},alt:{type:"string"}}}}},AppBskyEmbedRecord:{lexicon:1,id:"app.bsky.embed.record",description:"A representation of a record embedded in another form of content",defs:{main:{type:"object",required:["record"],properties:{record:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},view:{type:"object",required:["record"],properties:{record:{type:"union",refs:["lex:app.bsky.embed.record#viewRecord","lex:app.bsky.embed.record#viewNotFound","lex:app.bsky.embed.record#viewBlocked"]}}},viewRecord:{type:"object",required:["uri","cid","author","value","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},value:{type:"unknown"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}},embeds:{type:"array",items:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view","lex:app.bsky.embed.record#view","lex:app.bsky.embed.recordWithMedia#view"]}},indexedAt:{type:"string",format:"datetime"}}},viewNotFound:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}},viewBlocked:{type:"object",required:["uri"],properties:{uri:{type:"string",format:"at-uri"}}}}},AppBskyEmbedRecordWithMedia:{lexicon:1,id:"app.bsky.embed.recordWithMedia",description:"A representation of a record embedded in another form of content, alongside other compatible embeds",defs:{main:{type:"object",required:["record","media"],properties:{record:{type:"ref",ref:"lex:app.bsky.embed.record"},media:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external"]}}},view:{type:"object",required:["record","media"],properties:{record:{type:"ref",ref:"lex:app.bsky.embed.record#view"},media:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view"]}}}}},AppBskyFeedDefs:{lexicon:1,id:"app.bsky.feed.defs",defs:{postView:{type:"object",required:["uri","cid","author","record","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},record:{type:"unknown"},embed:{type:"union",refs:["lex:app.bsky.embed.images#view","lex:app.bsky.embed.external#view","lex:app.bsky.embed.record#view","lex:app.bsky.embed.recordWithMedia#view"]},replyCount:{type:"integer"},repostCount:{type:"integer"},likeCount:{type:"integer"},indexedAt:{type:"string",format:"datetime"},viewer:{type:"ref",ref:"lex:app.bsky.feed.defs#viewerState"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}},viewerState:{type:"object",properties:{repost:{type:"string",format:"at-uri"},like:{type:"string",format:"at-uri"}}},feedViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},reply:{type:"ref",ref:"lex:app.bsky.feed.defs#replyRef"},reason:{type:"union",refs:["lex:app.bsky.feed.defs#reasonRepost"]}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},parent:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"}}},reasonRepost:{type:"object",required:["by","indexedAt"],properties:{by:{type:"ref",ref:"lex:app.bsky.actor.defs#profileViewBasic"},indexedAt:{type:"string",format:"datetime"}}},threadViewPost:{type:"object",required:["post"],properties:{post:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"},parent:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]},replies:{type:"array",items:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}}},notFoundPost:{type:"object",required:["uri","notFound"],properties:{uri:{type:"string",format:"at-uri"},notFound:{type:"boolean",const:!0}}},blockedPost:{type:"object",required:["uri","blocked"],properties:{uri:{type:"string",format:"at-uri"},blocked:{type:"boolean",const:!0}}}}},AppBskyFeedGetAuthorFeed:{lexicon:1,id:"app.bsky.feed.getAuthorFeed",defs:{main:{type:"query",description:"A view of an actor's feed.",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}},errors:[{name:"BlockedActor"},{name:"BlockedByActor"}]}}},AppBskyFeedGetLikes:{lexicon:1,id:"app.bsky.feed.getLikes",defs:{main:{type:"query",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","likes"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},cursor:{type:"string"},likes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.getLikes#like"}}}}}},like:{type:"object",required:["indexedAt","createdAt","actor"],properties:{indexedAt:{type:"string",format:"datetime"},createdAt:{type:"string",format:"datetime"},actor:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}},AppBskyFeedGetPostThread:{lexicon:1,id:"app.bsky.feed.getPostThread",defs:{main:{type:"query",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},depth:{type:"integer"}}},output:{encoding:"application/json",schema:{type:"object",required:["thread"],properties:{thread:{type:"union",refs:["lex:app.bsky.feed.defs#threadViewPost","lex:app.bsky.feed.defs#notFoundPost","lex:app.bsky.feed.defs#blockedPost"]}}}},errors:[{name:"NotFound"}]}}},AppBskyFeedGetPosts:{lexicon:1,id:"app.bsky.feed.getPosts",defs:{main:{type:"query",description:"A view of an actor's feed.",parameters:{type:"params",required:["uris"],properties:{uris:{type:"array",items:{type:"string",format:"at-uri"},maxLength:25}}},output:{encoding:"application/json",schema:{type:"object",required:["posts"],properties:{posts:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#postView"}}}}}}}},AppBskyFeedGetRepostedBy:{lexicon:1,id:"app.bsky.feed.getRepostedBy",defs:{main:{type:"query",parameters:{type:"params",required:["uri"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["uri","repostedBy"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},cursor:{type:"string"},repostedBy:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyFeedGetTimeline:{lexicon:1,id:"app.bsky.feed.getTimeline",defs:{main:{type:"query",description:"A view of the user's home timeline.",parameters:{type:"params",properties:{algorithm:{type:"string"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}}}}},AppBskyFeedLike:{lexicon:1,id:"app.bsky.feed.like",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyFeedPost:{lexicon:1,id:"app.bsky.feed.post",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["text","createdAt"],properties:{text:{type:"string",maxLength:3e3,maxGraphemes:300},entities:{type:"array",description:"Deprecated: replaced by app.bsky.richtext.facet.",items:{type:"ref",ref:"lex:app.bsky.feed.post#entity"}},facets:{type:"array",items:{type:"ref",ref:"lex:app.bsky.richtext.facet"}},reply:{type:"ref",ref:"lex:app.bsky.feed.post#replyRef"},embed:{type:"union",refs:["lex:app.bsky.embed.images","lex:app.bsky.embed.external","lex:app.bsky.embed.record","lex:app.bsky.embed.recordWithMedia"]},createdAt:{type:"string",format:"datetime"}}}},replyRef:{type:"object",required:["root","parent"],properties:{root:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},parent:{type:"ref",ref:"lex:com.atproto.repo.strongRef"}}},entity:{type:"object",description:"Deprecated: use facets instead.",required:["index","type","value"],properties:{index:{type:"ref",ref:"lex:app.bsky.feed.post#textSlice"},type:{type:"string",description:"Expected values are 'mention' and 'link'."},value:{type:"string"}}},textSlice:{type:"object",description:"Deprecated. Use app.bsky.richtext instead -- A text segment. Start is inclusive, end is exclusive. Indices are for utf16-encoded strings.",required:["start","end"],properties:{start:{type:"integer",minimum:0},end:{type:"integer",minimum:0}}}}},AppBskyFeedRepost:{lexicon:1,id:"app.bsky.feed.repost",defs:{main:{type:"record",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"ref",ref:"lex:com.atproto.repo.strongRef"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphBlock:{lexicon:1,id:"app.bsky.graph.block",defs:{main:{type:"record",description:"A block.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphFollow:{lexicon:1,id:"app.bsky.graph.follow",defs:{main:{type:"record",description:"A social follow.",key:"tid",record:{type:"object",required:["subject","createdAt"],properties:{subject:{type:"string",format:"did"},createdAt:{type:"string",format:"datetime"}}}}}},AppBskyGraphGetBlocks:{lexicon:1,id:"app.bsky.graph.getBlocks",defs:{main:{type:"query",description:"Who is the requester's account blocking?",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["blocks"],properties:{cursor:{type:"string"},blocks:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetFollowers:{lexicon:1,id:"app.bsky.graph.getFollowers",defs:{main:{type:"query",description:"Who is following an actor?",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","followers"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},followers:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetFollows:{lexicon:1,id:"app.bsky.graph.getFollows",defs:{main:{type:"query",description:"Who is an actor following?",parameters:{type:"params",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"},limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["subject","follows"],properties:{subject:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},cursor:{type:"string"},follows:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphGetMutes:{lexicon:1,id:"app.bsky.graph.getMutes",defs:{main:{type:"query",description:"Who does the viewer mute?",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["mutes"],properties:{cursor:{type:"string"},mutes:{type:"array",items:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"}}}}}}}},AppBskyGraphMuteActor:{lexicon:1,id:"app.bsky.graph.muteActor",defs:{main:{type:"procedure",description:"Mute an actor by did or handle.",input:{encoding:"application/json",schema:{type:"object",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}}}}}},AppBskyGraphUnmuteActor:{lexicon:1,id:"app.bsky.graph.unmuteActor",defs:{main:{type:"procedure",description:"Unmute an actor by did or handle.",input:{encoding:"application/json",schema:{type:"object",required:["actor"],properties:{actor:{type:"string",format:"at-identifier"}}}}}}},AppBskyNotificationGetUnreadCount:{lexicon:1,id:"app.bsky.notification.getUnreadCount",defs:{main:{type:"query",parameters:{type:"params",properties:{seenAt:{type:"string",format:"datetime"}}},output:{encoding:"application/json",schema:{type:"object",required:["count"],properties:{count:{type:"integer"}}}}}}},AppBskyNotificationListNotifications:{lexicon:1,id:"app.bsky.notification.listNotifications",defs:{main:{type:"query",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"},seenAt:{type:"string",format:"datetime"}}},output:{encoding:"application/json",schema:{type:"object",required:["notifications"],properties:{cursor:{type:"string"},notifications:{type:"array",items:{type:"ref",ref:"lex:app.bsky.notification.listNotifications#notification"}}}}}},notification:{type:"object",required:["uri","cid","author","reason","record","isRead","indexedAt"],properties:{uri:{type:"string",format:"at-uri"},cid:{type:"string",format:"cid"},author:{type:"ref",ref:"lex:app.bsky.actor.defs#profileView"},reason:{type:"string",description:"Expected values are 'like', 'repost', 'follow', 'mention', 'reply', and 'quote'.",knownValues:["like","repost","follow","mention","reply","quote"]},reasonSubject:{type:"string",format:"at-uri"},record:{type:"unknown"},isRead:{type:"boolean"},indexedAt:{type:"string",format:"datetime"},labels:{type:"array",items:{type:"ref",ref:"lex:com.atproto.label.defs#label"}}}}}},AppBskyNotificationUpdateSeen:{lexicon:1,id:"app.bsky.notification.updateSeen",defs:{main:{type:"procedure",description:"Notify server that the user has seen notifications.",input:{encoding:"application/json",schema:{type:"object",required:["seenAt"],properties:{seenAt:{type:"string",format:"datetime"}}}}}}},AppBskyRichtextFacet:{lexicon:1,id:"app.bsky.richtext.facet",defs:{main:{type:"object",required:["index","features"],properties:{index:{type:"ref",ref:"lex:app.bsky.richtext.facet#byteSlice"},features:{type:"array",items:{type:"union",refs:["lex:app.bsky.richtext.facet#mention","lex:app.bsky.richtext.facet#link"]}}}},mention:{type:"object",description:"A facet feature for actor mentions.",required:["did"],properties:{did:{type:"string",format:"did"}}},link:{type:"object",description:"A facet feature for links.",required:["uri"],properties:{uri:{type:"string",format:"uri"}}},byteSlice:{type:"object",description:"A text segment. Start is inclusive, end is exclusive. Indices are for utf8-encoded strings.",required:["byteStart","byteEnd"],properties:{byteStart:{type:"integer",minimum:0},byteEnd:{type:"integer",minimum:0}}}}},AppBskyUnspeccedGetPopular:{lexicon:1,id:"app.bsky.unspecced.getPopular",defs:{main:{type:"query",description:"An unspecced view of globally popular items",parameters:{type:"params",properties:{limit:{type:"integer",minimum:1,maximum:100,default:50},cursor:{type:"string"}}},output:{encoding:"application/json",schema:{type:"object",required:["feed"],properties:{cursor:{type:"string"},feed:{type:"array",items:{type:"ref",ref:"lex:app.bsky.feed.defs#feedViewPost"}}}}}}}}}),Ii=new di($i),qi={};function Di(e){return e}p(qi,{toKnownErr:()=>Di});var Pi={};function Vi(e){return e}p(Pi,{toKnownErr:()=>Vi});var Ni={};function Bi(e){return e}p(Ni,{toKnownErr:()=>Bi});var Oi={};function Li(e){return e}p(Oi,{toKnownErr:()=>Li});var Mi={};function Ui(e){return e}p(Mi,{toKnownErr:()=>Ui});var Zi={};function zi(e){return e}p(Zi,{toKnownErr:()=>zi});var Gi={};function Fi(e){return e}p(Gi,{toKnownErr:()=>Fi});var Ki={};function Wi(e){return e}p(Ki,{toKnownErr:()=>Wi});var Hi={};function Ji(e){return e}p(Hi,{toKnownErr:()=>Ji});var Xi={};function Qi(e){return e}p(Xi,{toKnownErr:()=>Qi});var Yi={};function es(e){return e}p(Yi,{toKnownErr:()=>es});var ts={};p(ts,{SubjectHasActionError:()=>rs,toKnownErr:()=>os});var rs=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function os(e){return e instanceof Ai&&"SubjectHasAction"===e.error?new rs(e):e}var is={};function ss(e){return e}p(is,{toKnownErr:()=>ss});var as={};function ns(e){return e}p(as,{toKnownErr:()=>ns});var cs={};function ps(e){return e}p(cs,{toKnownErr:()=>ps});var ds={};function ls(e){return e}p(ds,{toKnownErr:()=>ls});var us={};function ms(e){return e}p(us,{toKnownErr:()=>ms});var ys={};function fs(e){return e}p(ys,{toKnownErr:()=>fs});var hs={};function gs(e){return"object"==typeof e&&null!==e}function bs(e,t){return t in e}p(hs,{InvalidSwapError:()=>vs,isCreate:()=>xs,isDelete:()=>js,isUpdate:()=>As,toKnownErr:()=>ws,validateCreate:()=>ks,validateDelete:()=>Ss,validateUpdate:()=>_s});var vs=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function ws(e){return e instanceof Ai&&"InvalidSwap"===e.error?new vs(e):e}function xs(e){return gs(e)&&bs(e,"$type")&&"com.atproto.repo.applyWrites#create"===e.$type}function ks(e){return Ii.validate("com.atproto.repo.applyWrites#create",e)}function As(e){return gs(e)&&bs(e,"$type")&&"com.atproto.repo.applyWrites#update"===e.$type}function _s(e){return Ii.validate("com.atproto.repo.applyWrites#update",e)}function js(e){return gs(e)&&bs(e,"$type")&&"com.atproto.repo.applyWrites#delete"===e.$type}function Ss(e){return Ii.validate("com.atproto.repo.applyWrites#delete",e)}var Rs={};p(Rs,{InvalidSwapError:()=>Cs,toKnownErr:()=>Es});var Cs=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Es(e){return e instanceof Ai&&"InvalidSwap"===e.error?new Cs(e):e}var Ts={};p(Ts,{InvalidSwapError:()=>$s,toKnownErr:()=>Is});var $s=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Is(e){return e instanceof Ai&&"InvalidSwap"===e.error?new $s(e):e}var qs={};function Ds(e){return e}p(qs,{toKnownErr:()=>Ds});var Ps={};function Vs(e){return e}p(Ps,{toKnownErr:()=>Vs});var Ns={};function Bs(e){return e}function Os(e){return gs(e)&&bs(e,"$type")&&"com.atproto.repo.listRecords#record"===e.$type}function Ls(e){return Ii.validate("com.atproto.repo.listRecords#record",e)}p(Ns,{isRecord:()=>Os,toKnownErr:()=>Bs,validateRecord:()=>Ls});var Ms={};p(Ms,{InvalidSwapError:()=>Us,toKnownErr:()=>Zs});var Us=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Zs(e){return e instanceof Ai&&"InvalidSwap"===e.error?new Us(e):e}var zs={};function Gs(e){return e}p(zs,{toKnownErr:()=>Gs});var Fs={};p(Fs,{HandleNotAvailableError:()=>Js,InvalidHandleError:()=>Ks,InvalidInviteCodeError:()=>Hs,InvalidPasswordError:()=>Ws,UnsupportedDomainError:()=>Xs,toKnownErr:()=>Qs});var Ks=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},Ws=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},Hs=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},Js=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},Xs=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Qs(e){if(e instanceof Ai){if("InvalidHandle"===e.error)return new Ks(e);if("InvalidPassword"===e.error)return new Ws(e);if("InvalidInviteCode"===e.error)return new Hs(e);if("HandleNotAvailable"===e.error)return new Js(e);if("UnsupportedDomain"===e.error)return new Xs(e)}return e}var Ys={};p(Ys,{AccountTakedownError:()=>ea,isAppPassword:()=>ra,toKnownErr:()=>ta,validateAppPassword:()=>oa});var ea=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function ta(e){return e instanceof Ai&&"AccountTakedown"===e.error?new ea(e):e}function ra(e){return gs(e)&&bs(e,"$type")&&"com.atproto.server.createAppPassword#appPassword"===e.$type}function oa(e){return Ii.validate("com.atproto.server.createAppPassword#appPassword",e)}var ia={};function sa(e){return e}p(ia,{toKnownErr:()=>sa});var aa={};function na(e){return e}function ca(e){return gs(e)&&bs(e,"$type")&&"com.atproto.server.createInviteCodes#accountCodes"===e.$type}function pa(e){return Ii.validate("com.atproto.server.createInviteCodes#accountCodes",e)}p(aa,{isAccountCodes:()=>ca,toKnownErr:()=>na,validateAccountCodes:()=>pa});var da={};p(da,{AccountTakedownError:()=>la,toKnownErr:()=>ua});var la=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function ua(e){return e instanceof Ai&&"AccountTakedown"===e.error?new la(e):e}var ma={};p(ma,{ExpiredTokenError:()=>ya,InvalidTokenError:()=>fa,toKnownErr:()=>ha});var ya=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},fa=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function ha(e){if(e instanceof Ai){if("ExpiredToken"===e.error)return new ya(e);if("InvalidToken"===e.error)return new fa(e)}return e}var ga={};function ba(e){return e}p(ga,{toKnownErr:()=>ba});var va={};function wa(e){return e}function xa(e){return gs(e)&&bs(e,"$type")&&"com.atproto.server.describeServer#links"===e.$type}function ka(e){return Ii.validate("com.atproto.server.describeServer#links",e)}p(va,{isLinks:()=>xa,toKnownErr:()=>wa,validateLinks:()=>ka});var Aa={};p(Aa,{DuplicateCreateError:()=>_a,toKnownErr:()=>ja});var _a=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function ja(e){return e instanceof Ai&&"DuplicateCreate"===e.error?new _a(e):e}var Sa={};function Ra(e){return e}p(Sa,{toKnownErr:()=>Ra});var Ca={};p(Ca,{AccountTakedownError:()=>Ea,isAppPassword:()=>$a,toKnownErr:()=>Ta,validateAppPassword:()=>Ia});var Ea=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Ta(e){return e instanceof Ai&&"AccountTakedown"===e.error?new Ea(e):e}function $a(e){return gs(e)&&bs(e,"$type")&&"com.atproto.server.listAppPasswords#appPassword"===e.$type}function Ia(e){return Ii.validate("com.atproto.server.listAppPasswords#appPassword",e)}var qa={};p(qa,{AccountTakedownError:()=>Da,toKnownErr:()=>Pa});var Da=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Pa(e){return e instanceof Ai&&"AccountTakedown"===e.error?new Da(e):e}var Va={};function Na(e){return e}p(Va,{toKnownErr:()=>Na});var Ba={};function Oa(e){return e}p(Ba,{toKnownErr:()=>Oa});var La={};p(La,{ExpiredTokenError:()=>Ma,InvalidTokenError:()=>Ua,toKnownErr:()=>Za});var Ma=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},Ua=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Za(e){if(e instanceof Ai){if("ExpiredToken"===e.error)return new Ma(e);if("InvalidToken"===e.error)return new Ua(e)}return e}var za={};function Ga(e){return e}p(za,{toKnownErr:()=>Ga});var Fa={};function Ka(e){return e}p(Fa,{toKnownErr:()=>Ka});var Wa={};function Ha(e){return e}p(Wa,{toKnownErr:()=>Ha});var Ja={};function Xa(e){return e}p(Ja,{toKnownErr:()=>Xa});var Qa={};function Ya(e){return e}p(Qa,{toKnownErr:()=>Ya});var en={};function tn(e){return e}p(en,{toKnownErr:()=>tn});var rn={};function on(e){return e}p(rn,{toKnownErr:()=>on});var sn={};function an(e){return e}p(sn,{toKnownErr:()=>an});var nn={};function cn(e){return e}p(nn,{toKnownErr:()=>cn});var pn={};function dn(e){return e}function ln(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.listRepos#repo"===e.$type}function un(e){return Ii.validate("com.atproto.sync.listRepos#repo",e)}p(pn,{isRepo:()=>ln,toKnownErr:()=>dn,validateRepo:()=>un});var mn={};function yn(e){return e}p(mn,{toKnownErr:()=>yn});var fn={};function hn(e){return e}p(fn,{toKnownErr:()=>hn});var gn={};function bn(e){return e}p(gn,{toKnownErr:()=>bn});var vn={};function wn(e){return e}p(vn,{toKnownErr:()=>wn});var xn={};function kn(e){return e}p(xn,{toKnownErr:()=>kn});var An={};function jn(e){return e}p(An,{toKnownErr:()=>jn});var Sn={};function Rn(e){return e}p(Sn,{toKnownErr:()=>Rn});var Cn={};p(Cn,{BlockedActorError:()=>En,BlockedByActorError:()=>Tn,toKnownErr:()=>$n});var En=class extends Ai{constructor(e){super(e.status,e.error,e.message)}},Tn=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function $n(e){if(e instanceof Ai){if("BlockedActor"===e.error)return new En(e);if("BlockedByActor"===e.error)return new Tn(e)}return e}var In={};function qn(e){return e}function Dn(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.getLikes#like"===e.$type}function Pn(e){return Ii.validate("app.bsky.feed.getLikes#like",e)}p(In,{isLike:()=>Dn,toKnownErr:()=>qn,validateLike:()=>Pn});var Vn={};p(Vn,{NotFoundError:()=>Nn,toKnownErr:()=>Bn});var Nn=class extends Ai{constructor(e){super(e.status,e.error,e.message)}};function Bn(e){return e instanceof Ai&&"NotFound"===e.error?new Nn(e):e}var On={};function Ln(e){return e}p(On,{toKnownErr:()=>Ln});var Mn={};function Un(e){return e}p(Mn,{toKnownErr:()=>Un});var Zn={};function zn(e){return e}p(Zn,{toKnownErr:()=>zn});var Gn={};function Fn(e){return e}p(Gn,{toKnownErr:()=>Fn});var Kn={};function Wn(e){return e}p(Kn,{toKnownErr:()=>Wn});var Hn={};function Jn(e){return e}p(Hn,{toKnownErr:()=>Jn});var Xn={};function Qn(e){return e}p(Xn,{toKnownErr:()=>Qn});var Yn={};function ec(e){return e}p(Yn,{toKnownErr:()=>ec});var tc={};function rc(e){return e}p(tc,{toKnownErr:()=>rc});var oc={};function ic(e){return e}p(oc,{toKnownErr:()=>ic});var sc={};function ac(e){return e}function nc(e){return gs(e)&&bs(e,"$type")&&"app.bsky.notification.listNotifications#notification"===e.$type}function cc(e){return Ii.validate("app.bsky.notification.listNotifications#notification",e)}p(sc,{isNotification:()=>nc,toKnownErr:()=>ac,validateNotification:()=>cc});var pc={};function dc(e){return e}p(pc,{toKnownErr:()=>dc});var lc={};function uc(e){return e}p(lc,{toKnownErr:()=>uc});var mc={};function yc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#actionView"===e.$type}function fc(e){return Ii.validate("com.atproto.admin.defs#actionView",e)}function hc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#actionViewDetail"===e.$type}function gc(e){return Ii.validate("com.atproto.admin.defs#actionViewDetail",e)}function bc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#actionViewCurrent"===e.$type}function vc(e){return Ii.validate("com.atproto.admin.defs#actionViewCurrent",e)}function wc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#actionReversal"===e.$type}function xc(e){return Ii.validate("com.atproto.admin.defs#actionReversal",e)}p(mc,{ACKNOWLEDGE:()=>_c,FLAG:()=>Ac,TAKEDOWN:()=>kc,isActionReversal:()=>wc,isActionView:()=>yc,isActionViewCurrent:()=>bc,isActionViewDetail:()=>hc,isBlobView:()=>Zc,isImageDetails:()=>Gc,isModeration:()=>Oc,isModerationDetail:()=>Mc,isRecordView:()=>Pc,isRecordViewDetail:()=>Nc,isRepoRef:()=>qc,isRepoView:()=>Ec,isRepoViewDetail:()=>$c,isReportView:()=>jc,isReportViewDetail:()=>Rc,isVideoDetails:()=>Kc,validateActionReversal:()=>xc,validateActionView:()=>fc,validateActionViewCurrent:()=>vc,validateActionViewDetail:()=>gc,validateBlobView:()=>zc,validateImageDetails:()=>Fc,validateModeration:()=>Lc,validateModerationDetail:()=>Uc,validateRecordView:()=>Vc,validateRecordViewDetail:()=>Bc,validateRepoRef:()=>Dc,validateRepoView:()=>Tc,validateRepoViewDetail:()=>Ic,validateReportView:()=>Sc,validateReportViewDetail:()=>Cc,validateVideoDetails:()=>Wc});var kc="com.atproto.admin.defs#takedown",Ac="com.atproto.admin.defs#flag",_c="com.atproto.admin.defs#acknowledge";function jc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#reportView"===e.$type}function Sc(e){return Ii.validate("com.atproto.admin.defs#reportView",e)}function Rc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#reportViewDetail"===e.$type}function Cc(e){return Ii.validate("com.atproto.admin.defs#reportViewDetail",e)}function Ec(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#repoView"===e.$type}function Tc(e){return Ii.validate("com.atproto.admin.defs#repoView",e)}function $c(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#repoViewDetail"===e.$type}function Ic(e){return Ii.validate("com.atproto.admin.defs#repoViewDetail",e)}function qc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#repoRef"===e.$type}function Dc(e){return Ii.validate("com.atproto.admin.defs#repoRef",e)}function Pc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#recordView"===e.$type}function Vc(e){return Ii.validate("com.atproto.admin.defs#recordView",e)}function Nc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#recordViewDetail"===e.$type}function Bc(e){return Ii.validate("com.atproto.admin.defs#recordViewDetail",e)}function Oc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#moderation"===e.$type}function Lc(e){return Ii.validate("com.atproto.admin.defs#moderation",e)}function Mc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#moderationDetail"===e.$type}function Uc(e){return Ii.validate("com.atproto.admin.defs#moderationDetail",e)}function Zc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#blobView"===e.$type}function zc(e){return Ii.validate("com.atproto.admin.defs#blobView",e)}function Gc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#imageDetails"===e.$type}function Fc(e){return Ii.validate("com.atproto.admin.defs#imageDetails",e)}function Kc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.admin.defs#videoDetails"===e.$type}function Wc(e){return Ii.validate("com.atproto.admin.defs#videoDetails",e)}var Hc={};function Jc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.label.defs#label"===e.$type}function Xc(e){return Ii.validate("com.atproto.label.defs#label",e)}p(Hc,{isLabel:()=>Jc,validateLabel:()=>Xc});var Qc={};function Yc(e){return gs(e)&&bs(e,"$type")&&"com.atproto.label.subscribeLabels#labels"===e.$type}function ep(e){return Ii.validate("com.atproto.label.subscribeLabels#labels",e)}function tp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.label.subscribeLabels#info"===e.$type}function rp(e){return Ii.validate("com.atproto.label.subscribeLabels#info",e)}p(Qc,{isInfo:()=>tp,isLabels:()=>Yc,validateInfo:()=>rp,validateLabels:()=>ep});var op={};p(op,{REASONMISLEADING:()=>ap,REASONOTHER:()=>pp,REASONRUDE:()=>cp,REASONSEXUAL:()=>np,REASONSPAM:()=>ip,REASONVIOLATION:()=>sp});var ip="com.atproto.moderation.defs#reasonSpam",sp="com.atproto.moderation.defs#reasonViolation",ap="com.atproto.moderation.defs#reasonMisleading",np="com.atproto.moderation.defs#reasonSexual",cp="com.atproto.moderation.defs#reasonRude",pp="com.atproto.moderation.defs#reasonOther",dp={};function lp(e){return gs(e)&&bs(e,"$type")&&("com.atproto.repo.strongRef#main"===e.$type||"com.atproto.repo.strongRef"===e.$type)}function up(e){return Ii.validate("com.atproto.repo.strongRef#main",e)}p(dp,{isMain:()=>lp,validateMain:()=>up});var mp={};function yp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.server.defs#inviteCode"===e.$type}function fp(e){return Ii.validate("com.atproto.server.defs#inviteCode",e)}function hp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.server.defs#inviteCodeUse"===e.$type}function gp(e){return Ii.validate("com.atproto.server.defs#inviteCodeUse",e)}p(mp,{isInviteCode:()=>yp,isInviteCodeUse:()=>hp,validateInviteCode:()=>fp,validateInviteCodeUse:()=>gp});var bp={};function vp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.subscribeRepos#commit"===e.$type}function wp(e){return Ii.validate("com.atproto.sync.subscribeRepos#commit",e)}function xp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.subscribeRepos#handle"===e.$type}function kp(e){return Ii.validate("com.atproto.sync.subscribeRepos#handle",e)}function Ap(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.subscribeRepos#migrate"===e.$type}function _p(e){return Ii.validate("com.atproto.sync.subscribeRepos#migrate",e)}function jp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.subscribeRepos#tombstone"===e.$type}function Sp(e){return Ii.validate("com.atproto.sync.subscribeRepos#tombstone",e)}function Rp(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.subscribeRepos#info"===e.$type}function Cp(e){return Ii.validate("com.atproto.sync.subscribeRepos#info",e)}function Ep(e){return gs(e)&&bs(e,"$type")&&"com.atproto.sync.subscribeRepos#repoOp"===e.$type}function Tp(e){return Ii.validate("com.atproto.sync.subscribeRepos#repoOp",e)}p(bp,{isCommit:()=>vp,isHandle:()=>xp,isInfo:()=>Rp,isMigrate:()=>Ap,isRepoOp:()=>Ep,isTombstone:()=>jp,validateCommit:()=>wp,validateHandle:()=>kp,validateInfo:()=>Cp,validateMigrate:()=>_p,validateRepoOp:()=>Tp,validateTombstone:()=>Sp});var $p={};function Ip(e){return gs(e)&&bs(e,"$type")&&"app.bsky.actor.defs#profileViewBasic"===e.$type}function qp(e){return Ii.validate("app.bsky.actor.defs#profileViewBasic",e)}function Dp(e){return gs(e)&&bs(e,"$type")&&"app.bsky.actor.defs#profileView"===e.$type}function Pp(e){return Ii.validate("app.bsky.actor.defs#profileView",e)}function Vp(e){return gs(e)&&bs(e,"$type")&&"app.bsky.actor.defs#profileViewDetailed"===e.$type}function Np(e){return Ii.validate("app.bsky.actor.defs#profileViewDetailed",e)}function Bp(e){return gs(e)&&bs(e,"$type")&&"app.bsky.actor.defs#viewerState"===e.$type}function Op(e){return Ii.validate("app.bsky.actor.defs#viewerState",e)}p($p,{isProfileView:()=>Dp,isProfileViewBasic:()=>Ip,isProfileViewDetailed:()=>Vp,isViewerState:()=>Bp,validateProfileView:()=>Pp,validateProfileViewBasic:()=>qp,validateProfileViewDetailed:()=>Np,validateViewerState:()=>Op});var Lp={};function Mp(e){return gs(e)&&bs(e,"$type")&&("app.bsky.actor.profile#main"===e.$type||"app.bsky.actor.profile"===e.$type)}function Up(e){return Ii.validate("app.bsky.actor.profile#main",e)}p(Lp,{isRecord:()=>Mp,validateRecord:()=>Up});var Zp={};function zp(e){return gs(e)&&bs(e,"$type")&&("app.bsky.embed.external#main"===e.$type||"app.bsky.embed.external"===e.$type)}function Gp(e){return Ii.validate("app.bsky.embed.external#main",e)}function Fp(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.external#external"===e.$type}function Kp(e){return Ii.validate("app.bsky.embed.external#external",e)}function Wp(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.external#view"===e.$type}function Hp(e){return Ii.validate("app.bsky.embed.external#view",e)}function Jp(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.external#viewExternal"===e.$type}function Xp(e){return Ii.validate("app.bsky.embed.external#viewExternal",e)}p(Zp,{isExternal:()=>Fp,isMain:()=>zp,isView:()=>Wp,isViewExternal:()=>Jp,validateExternal:()=>Kp,validateMain:()=>Gp,validateView:()=>Hp,validateViewExternal:()=>Xp});var Qp={};function Yp(e){return gs(e)&&bs(e,"$type")&&("app.bsky.embed.images#main"===e.$type||"app.bsky.embed.images"===e.$type)}function ed(e){return Ii.validate("app.bsky.embed.images#main",e)}function td(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.images#image"===e.$type}function rd(e){return Ii.validate("app.bsky.embed.images#image",e)}function od(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.images#view"===e.$type}function id(e){return Ii.validate("app.bsky.embed.images#view",e)}function sd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.images#viewImage"===e.$type}function ad(e){return Ii.validate("app.bsky.embed.images#viewImage",e)}p(Qp,{isImage:()=>td,isMain:()=>Yp,isView:()=>od,isViewImage:()=>sd,validateImage:()=>rd,validateMain:()=>ed,validateView:()=>id,validateViewImage:()=>ad});var nd={};function cd(e){return gs(e)&&bs(e,"$type")&&("app.bsky.embed.record#main"===e.$type||"app.bsky.embed.record"===e.$type)}function pd(e){return Ii.validate("app.bsky.embed.record#main",e)}function dd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.record#view"===e.$type}function ld(e){return Ii.validate("app.bsky.embed.record#view",e)}function ud(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.record#viewRecord"===e.$type}function md(e){return Ii.validate("app.bsky.embed.record#viewRecord",e)}function yd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.record#viewNotFound"===e.$type}function fd(e){return Ii.validate("app.bsky.embed.record#viewNotFound",e)}function hd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.record#viewBlocked"===e.$type}function gd(e){return Ii.validate("app.bsky.embed.record#viewBlocked",e)}p(nd,{isMain:()=>cd,isView:()=>dd,isViewBlocked:()=>hd,isViewNotFound:()=>yd,isViewRecord:()=>ud,validateMain:()=>pd,validateView:()=>ld,validateViewBlocked:()=>gd,validateViewNotFound:()=>fd,validateViewRecord:()=>md});var bd={};function vd(e){return gs(e)&&bs(e,"$type")&&("app.bsky.embed.recordWithMedia#main"===e.$type||"app.bsky.embed.recordWithMedia"===e.$type)}function wd(e){return Ii.validate("app.bsky.embed.recordWithMedia#main",e)}function xd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.embed.recordWithMedia#view"===e.$type}function kd(e){return Ii.validate("app.bsky.embed.recordWithMedia#view",e)}p(bd,{isMain:()=>vd,isView:()=>xd,validateMain:()=>wd,validateView:()=>kd});var Ad={};function _d(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#postView"===e.$type}function jd(e){return Ii.validate("app.bsky.feed.defs#postView",e)}function Sd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#viewerState"===e.$type}function Rd(e){return Ii.validate("app.bsky.feed.defs#viewerState",e)}function Cd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#feedViewPost"===e.$type}function Ed(e){return Ii.validate("app.bsky.feed.defs#feedViewPost",e)}function Td(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#replyRef"===e.$type}function $d(e){return Ii.validate("app.bsky.feed.defs#replyRef",e)}function Id(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#reasonRepost"===e.$type}function qd(e){return Ii.validate("app.bsky.feed.defs#reasonRepost",e)}function Dd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#threadViewPost"===e.$type}function Pd(e){return Ii.validate("app.bsky.feed.defs#threadViewPost",e)}function Vd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#notFoundPost"===e.$type}function Nd(e){return Ii.validate("app.bsky.feed.defs#notFoundPost",e)}function Bd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.defs#blockedPost"===e.$type}function Od(e){return Ii.validate("app.bsky.feed.defs#blockedPost",e)}p(Ad,{isBlockedPost:()=>Bd,isFeedViewPost:()=>Cd,isNotFoundPost:()=>Vd,isPostView:()=>_d,isReasonRepost:()=>Id,isReplyRef:()=>Td,isThreadViewPost:()=>Dd,isViewerState:()=>Sd,validateBlockedPost:()=>Od,validateFeedViewPost:()=>Ed,validateNotFoundPost:()=>Nd,validatePostView:()=>jd,validateReasonRepost:()=>qd,validateReplyRef:()=>$d,validateThreadViewPost:()=>Pd,validateViewerState:()=>Rd});var Ld={};function Md(e){return gs(e)&&bs(e,"$type")&&("app.bsky.feed.like#main"===e.$type||"app.bsky.feed.like"===e.$type)}function Ud(e){return Ii.validate("app.bsky.feed.like#main",e)}p(Ld,{isRecord:()=>Md,validateRecord:()=>Ud});var Zd={};function zd(e){return gs(e)&&bs(e,"$type")&&("app.bsky.feed.post#main"===e.$type||"app.bsky.feed.post"===e.$type)}function Gd(e){return Ii.validate("app.bsky.feed.post#main",e)}function Fd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.post#replyRef"===e.$type}function Kd(e){return Ii.validate("app.bsky.feed.post#replyRef",e)}function Wd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.post#entity"===e.$type}function Hd(e){return Ii.validate("app.bsky.feed.post#entity",e)}function Jd(e){return gs(e)&&bs(e,"$type")&&"app.bsky.feed.post#textSlice"===e.$type}function Xd(e){return Ii.validate("app.bsky.feed.post#textSlice",e)}p(Zd,{isEntity:()=>Wd,isRecord:()=>zd,isReplyRef:()=>Fd,isTextSlice:()=>Jd,validateEntity:()=>Hd,validateRecord:()=>Gd,validateReplyRef:()=>Kd,validateTextSlice:()=>Xd});var Qd={};function Yd(e){return gs(e)&&bs(e,"$type")&&("app.bsky.feed.repost#main"===e.$type||"app.bsky.feed.repost"===e.$type)}function el(e){return Ii.validate("app.bsky.feed.repost#main",e)}p(Qd,{isRecord:()=>Yd,validateRecord:()=>el});var tl={};function rl(e){return gs(e)&&bs(e,"$type")&&("app.bsky.graph.block#main"===e.$type||"app.bsky.graph.block"===e.$type)}function ol(e){return Ii.validate("app.bsky.graph.block#main",e)}p(tl,{isRecord:()=>rl,validateRecord:()=>ol});var il={};function sl(e){return gs(e)&&bs(e,"$type")&&("app.bsky.graph.follow#main"===e.$type||"app.bsky.graph.follow"===e.$type)}function al(e){return Ii.validate("app.bsky.graph.follow#main",e)}p(il,{isRecord:()=>sl,validateRecord:()=>al});var nl={};function cl(e){return gs(e)&&bs(e,"$type")&&("app.bsky.richtext.facet#main"===e.$type||"app.bsky.richtext.facet"===e.$type)}function pl(e){return Ii.validate("app.bsky.richtext.facet#main",e)}function dl(e){return gs(e)&&bs(e,"$type")&&"app.bsky.richtext.facet#mention"===e.$type}function ll(e){return Ii.validate("app.bsky.richtext.facet#mention",e)}function ul(e){return gs(e)&&bs(e,"$type")&&"app.bsky.richtext.facet#link"===e.$type}function ml(e){return Ii.validate("app.bsky.richtext.facet#link",e)}function yl(e){return gs(e)&&bs(e,"$type")&&"app.bsky.richtext.facet#byteSlice"===e.$type}function fl(e){return Ii.validate("app.bsky.richtext.facet#byteSlice",e)}p(nl,{isByteSlice:()=>yl,isLink:()=>ul,isMain:()=>cl,isMention:()=>dl,validateByteSlice:()=>fl,validateLink:()=>ml,validateMain:()=>pl,validateMention:()=>ll});var hl={DefsTakedown:"com.atproto.admin.defs#takedown",DefsFlag:"com.atproto.admin.defs#flag",DefsAcknowledge:"com.atproto.admin.defs#acknowledge"},gl={DefsReasonSpam:"com.atproto.moderation.defs#reasonSpam",DefsReasonViolation:"com.atproto.moderation.defs#reasonViolation",DefsReasonMisleading:"com.atproto.moderation.defs#reasonMisleading",DefsReasonSexual:"com.atproto.moderation.defs#reasonSexual",DefsReasonRude:"com.atproto.moderation.defs#reasonRude",DefsReasonOther:"com.atproto.moderation.defs#reasonOther"},bl=class{constructor(){this.xrpc=new Ci,this.xrpc.addLexicons($i)}service(e){return new vl(this,this.xrpc.service(e))}},vl=class{constructor(e,t){this._baseClient=e,this.xrpc=t,this.com=new wl(this),this.app=new El(this)}setHeader(e,t){this.xrpc.setHeader(e,t)}},wl=class{constructor(e){this._service=e,this.atproto=new xl(e)}},xl=class{constructor(e){this._service=e,this.admin=new kl(e),this.identity=new Al(e),this.label=new _l(e),this.moderation=new jl(e),this.repo=new Sl(e),this.server=new Rl(e),this.sync=new Cl(e)}},kl=class{constructor(e){this._service=e}disableInviteCodes(e,t){return this._service.xrpc.call("com.atproto.admin.disableInviteCodes",t?.qp,e,t).catch((e=>{throw e}))}getInviteCodes(e,t){return this._service.xrpc.call("com.atproto.admin.getInviteCodes",e,void 0,t).catch((e=>{throw e}))}getModerationAction(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationAction",e,void 0,t).catch((e=>{throw e}))}getModerationActions(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationActions",e,void 0,t).catch((e=>{throw e}))}getModerationReport(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationReport",e,void 0,t).catch((e=>{throw e}))}getModerationReports(e,t){return this._service.xrpc.call("com.atproto.admin.getModerationReports",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.admin.getRecord",e,void 0,t).catch((e=>{throw e}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.admin.getRepo",e,void 0,t).catch((e=>{throw e}))}resolveModerationReports(e,t){return this._service.xrpc.call("com.atproto.admin.resolveModerationReports",t?.qp,e,t).catch((e=>{throw e}))}reverseModerationAction(e,t){return this._service.xrpc.call("com.atproto.admin.reverseModerationAction",t?.qp,e,t).catch((e=>{throw e}))}searchRepos(e,t){return this._service.xrpc.call("com.atproto.admin.searchRepos",e,void 0,t).catch((e=>{throw e}))}takeModerationAction(e,t){return this._service.xrpc.call("com.atproto.admin.takeModerationAction",t?.qp,e,t).catch((e=>{throw os(e)}))}updateAccountEmail(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountEmail",t?.qp,e,t).catch((e=>{throw e}))}updateAccountHandle(e,t){return this._service.xrpc.call("com.atproto.admin.updateAccountHandle",t?.qp,e,t).catch((e=>{throw e}))}},Al=class{constructor(e){this._service=e}resolveHandle(e,t){return this._service.xrpc.call("com.atproto.identity.resolveHandle",e,void 0,t).catch((e=>{throw e}))}updateHandle(e,t){return this._service.xrpc.call("com.atproto.identity.updateHandle",t?.qp,e,t).catch((e=>{throw e}))}},_l=class{constructor(e){this._service=e}queryLabels(e,t){return this._service.xrpc.call("com.atproto.label.queryLabels",e,void 0,t).catch((e=>{throw e}))}},jl=class{constructor(e){this._service=e}createReport(e,t){return this._service.xrpc.call("com.atproto.moderation.createReport",t?.qp,e,t).catch((e=>{throw e}))}},Sl=class{constructor(e){this._service=e}applyWrites(e,t){return this._service.xrpc.call("com.atproto.repo.applyWrites",t?.qp,e,t).catch((e=>{throw ws(e)}))}createRecord(e,t){return this._service.xrpc.call("com.atproto.repo.createRecord",t?.qp,e,t).catch((e=>{throw Es(e)}))}deleteRecord(e,t){return this._service.xrpc.call("com.atproto.repo.deleteRecord",t?.qp,e,t).catch((e=>{throw Is(e)}))}describeRepo(e,t){return this._service.xrpc.call("com.atproto.repo.describeRepo",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.repo.getRecord",e,void 0,t).catch((e=>{throw e}))}listRecords(e,t){return this._service.xrpc.call("com.atproto.repo.listRecords",e,void 0,t).catch((e=>{throw e}))}putRecord(e,t){return this._service.xrpc.call("com.atproto.repo.putRecord",t?.qp,e,t).catch((e=>{throw Zs(e)}))}uploadBlob(e,t){return this._service.xrpc.call("com.atproto.repo.uploadBlob",t?.qp,e,t).catch((e=>{throw e}))}},Rl=class{constructor(e){this._service=e}createAccount(e,t){return this._service.xrpc.call("com.atproto.server.createAccount",t?.qp,e,t).catch((e=>{throw Qs(e)}))}createAppPassword(e,t){return this._service.xrpc.call("com.atproto.server.createAppPassword",t?.qp,e,t).catch((e=>{throw ta(e)}))}createInviteCode(e,t){return this._service.xrpc.call("com.atproto.server.createInviteCode",t?.qp,e,t).catch((e=>{throw e}))}createInviteCodes(e,t){return this._service.xrpc.call("com.atproto.server.createInviteCodes",t?.qp,e,t).catch((e=>{throw e}))}createSession(e,t){return this._service.xrpc.call("com.atproto.server.createSession",t?.qp,e,t).catch((e=>{throw ua(e)}))}deleteAccount(e,t){return this._service.xrpc.call("com.atproto.server.deleteAccount",t?.qp,e,t).catch((e=>{throw ha(e)}))}deleteSession(e,t){return this._service.xrpc.call("com.atproto.server.deleteSession",t?.qp,e,t).catch((e=>{throw e}))}describeServer(e,t){return this._service.xrpc.call("com.atproto.server.describeServer",e,void 0,t).catch((e=>{throw e}))}getAccountInviteCodes(e,t){return this._service.xrpc.call("com.atproto.server.getAccountInviteCodes",e,void 0,t).catch((e=>{throw ja(e)}))}getSession(e,t){return this._service.xrpc.call("com.atproto.server.getSession",e,void 0,t).catch((e=>{throw e}))}listAppPasswords(e,t){return this._service.xrpc.call("com.atproto.server.listAppPasswords",e,void 0,t).catch((e=>{throw Ta(e)}))}refreshSession(e,t){return this._service.xrpc.call("com.atproto.server.refreshSession",t?.qp,e,t).catch((e=>{throw Pa(e)}))}requestAccountDelete(e,t){return this._service.xrpc.call("com.atproto.server.requestAccountDelete",t?.qp,e,t).catch((e=>{throw e}))}requestPasswordReset(e,t){return this._service.xrpc.call("com.atproto.server.requestPasswordReset",t?.qp,e,t).catch((e=>{throw e}))}resetPassword(e,t){return this._service.xrpc.call("com.atproto.server.resetPassword",t?.qp,e,t).catch((e=>{throw Za(e)}))}revokeAppPassword(e,t){return this._service.xrpc.call("com.atproto.server.revokeAppPassword",t?.qp,e,t).catch((e=>{throw e}))}},Cl=class{constructor(e){this._service=e}getBlob(e,t){return this._service.xrpc.call("com.atproto.sync.getBlob",e,void 0,t).catch((e=>{throw e}))}getBlocks(e,t){return this._service.xrpc.call("com.atproto.sync.getBlocks",e,void 0,t).catch((e=>{throw e}))}getCheckout(e,t){return this._service.xrpc.call("com.atproto.sync.getCheckout",e,void 0,t).catch((e=>{throw e}))}getCommitPath(e,t){return this._service.xrpc.call("com.atproto.sync.getCommitPath",e,void 0,t).catch((e=>{throw e}))}getHead(e,t){return this._service.xrpc.call("com.atproto.sync.getHead",e,void 0,t).catch((e=>{throw e}))}getRecord(e,t){return this._service.xrpc.call("com.atproto.sync.getRecord",e,void 0,t).catch((e=>{throw e}))}getRepo(e,t){return this._service.xrpc.call("com.atproto.sync.getRepo",e,void 0,t).catch((e=>{throw e}))}listBlobs(e,t){return this._service.xrpc.call("com.atproto.sync.listBlobs",e,void 0,t).catch((e=>{throw e}))}listRepos(e,t){return this._service.xrpc.call("com.atproto.sync.listRepos",e,void 0,t).catch((e=>{throw e}))}notifyOfUpdate(e,t){return this._service.xrpc.call("com.atproto.sync.notifyOfUpdate",e,void 0,t).catch((e=>{throw e}))}requestCrawl(e,t){return this._service.xrpc.call("com.atproto.sync.requestCrawl",e,void 0,t).catch((e=>{throw e}))}},El=class{constructor(e){this._service=e,this.bsky=new Tl(e)}},Tl=class{constructor(e){this._service=e,this.actor=new $l(e),this.embed=new ql(e),this.feed=new Dl(e),this.graph=new Bl(e),this.notification=new Ml(e),this.richtext=new Ul(e),this.unspecced=new Zl(e)}},$l=class{constructor(e){this._service=e,this.profile=new Il(e)}getProfile(e,t){return this._service.xrpc.call("app.bsky.actor.getProfile",e,void 0,t).catch((e=>{throw e}))}getProfiles(e,t){return this._service.xrpc.call("app.bsky.actor.getProfiles",e,void 0,t).catch((e=>{throw e}))}getSuggestions(e,t){return this._service.xrpc.call("app.bsky.actor.getSuggestions",e,void 0,t).catch((e=>{throw e}))}searchActors(e,t){return this._service.xrpc.call("app.bsky.actor.searchActors",e,void 0,t).catch((e=>{throw e}))}searchActorsTypeahead(e,t){return this._service.xrpc.call("app.bsky.actor.searchActorsTypeahead",e,void 0,t).catch((e=>{throw e}))}},Il=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.actor.profile",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.actor.profile",...e})).data}async create(e,t,r){return t.$type="app.bsky.actor.profile",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.actor.profile",rkey:"self",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.actor.profile",...e},{headers:t})}},ql=class{constructor(e){this._service=e}},Dl=class{constructor(e){this._service=e,this.like=new Pl(e),this.post=new Vl(e),this.repost=new Nl(e)}getAuthorFeed(e,t){return this._service.xrpc.call("app.bsky.feed.getAuthorFeed",e,void 0,t).catch((e=>{throw $n(e)}))}getLikes(e,t){return this._service.xrpc.call("app.bsky.feed.getLikes",e,void 0,t).catch((e=>{throw e}))}getPostThread(e,t){return this._service.xrpc.call("app.bsky.feed.getPostThread",e,void 0,t).catch((e=>{throw Bn(e)}))}getPosts(e,t){return this._service.xrpc.call("app.bsky.feed.getPosts",e,void 0,t).catch((e=>{throw e}))}getRepostedBy(e,t){return this._service.xrpc.call("app.bsky.feed.getRepostedBy",e,void 0,t).catch((e=>{throw e}))}getTimeline(e,t){return this._service.xrpc.call("app.bsky.feed.getTimeline",e,void 0,t).catch((e=>{throw e}))}},Pl=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.like",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.like",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.like",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.like",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.like",...e},{headers:t})}},Vl=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.post",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.post",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.post",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.post",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.post",...e},{headers:t})}},Nl=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.feed.repost",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.feed.repost",...e})).data}async create(e,t,r){return t.$type="app.bsky.feed.repost",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.feed.repost",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.feed.repost",...e},{headers:t})}},Bl=class{constructor(e){this._service=e,this.block=new Ol(e),this.follow=new Ll(e)}getBlocks(e,t){return this._service.xrpc.call("app.bsky.graph.getBlocks",e,void 0,t).catch((e=>{throw e}))}getFollowers(e,t){return this._service.xrpc.call("app.bsky.graph.getFollowers",e,void 0,t).catch((e=>{throw e}))}getFollows(e,t){return this._service.xrpc.call("app.bsky.graph.getFollows",e,void 0,t).catch((e=>{throw e}))}getMutes(e,t){return this._service.xrpc.call("app.bsky.graph.getMutes",e,void 0,t).catch((e=>{throw e}))}muteActor(e,t){return this._service.xrpc.call("app.bsky.graph.muteActor",t?.qp,e,t).catch((e=>{throw e}))}unmuteActor(e,t){return this._service.xrpc.call("app.bsky.graph.unmuteActor",t?.qp,e,t).catch((e=>{throw e}))}},Ol=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.block",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.block",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.block",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.block",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.block",...e},{headers:t})}},Ll=class{constructor(e){this._service=e}async list(e){return(await this._service.xrpc.call("com.atproto.repo.listRecords",{collection:"app.bsky.graph.follow",...e})).data}async get(e){return(await this._service.xrpc.call("com.atproto.repo.getRecord",{collection:"app.bsky.graph.follow",...e})).data}async create(e,t,r){return t.$type="app.bsky.graph.follow",(await this._service.xrpc.call("com.atproto.repo.createRecord",void 0,{collection:"app.bsky.graph.follow",...e,record:t},{encoding:"application/json",headers:r})).data}async delete(e,t){await this._service.xrpc.call("com.atproto.repo.deleteRecord",void 0,{collection:"app.bsky.graph.follow",...e},{headers:t})}},Ml=class{constructor(e){this._service=e}getUnreadCount(e,t){return this._service.xrpc.call("app.bsky.notification.getUnreadCount",e,void 0,t).catch((e=>{throw e}))}listNotifications(e,t){return this._service.xrpc.call("app.bsky.notification.listNotifications",e,void 0,t).catch((e=>{throw e}))}updateSeen(e,t){return this._service.xrpc.call("app.bsky.notification.updateSeen",t?.qp,e,t).catch((e=>{throw e}))}},Ul=class{constructor(e){this._service=e}},Zl=class{constructor(e){this._service=e}getPopular(e,t){return this._service.xrpc.call("app.bsky.unspecced.getPopular",e,void 0,t).catch((e=>{throw e}))}},zl=class{constructor(e){this.uploadBlob=(e,t)=>this.api.com.atproto.repo.uploadBlob(e,t),this.resolveHandle=(e,t)=>this.api.com.atproto.identity.resolveHandle(e,t),this.updateHandle=(e,t)=>this.api.com.atproto.identity.updateHandle(e,t),this.createModerationReport=(e,t)=>this.api.com.atproto.moderation.createReport(e,t),this.service=e.service instanceof URL?e.service:new URL(e.service),this._persistSession=e.persistSession,this._baseClient=new bl,this._baseClient.xrpc.fetch=this._fetch.bind(this),this.api=this._baseClient.service(e.service)}get com(){return this.api.com}static configure(e){zl.fetch=e.fetch}get hasSession(){return!!this.session}setPersistSessionHandler(e){this._persistSession=e}async createAccount(e){try{const t=await this.api.com.atproto.server.createAccount({handle:e.handle,password:e.password,email:e.email,inviteCode:e.inviteCode});return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did,email:e.email},t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}async login(e){try{const t=await this.api.com.atproto.server.createSession({identifier:e.identifier,password:e.password});return this.session={accessJwt:t.data.accessJwt,refreshJwt:t.data.refreshJwt,handle:t.data.handle,did:t.data.did,email:t.data.email},t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}async resumeSession(e){try{this.session=e;const t=await this.api.com.atproto.server.getSession();if(!t.success||t.data.did!==this.session.did)throw new Error("Invalid session");return this.session.email=t.data.email,this.session.handle=t.data.handle,t}catch(e){throw this.session=void 0,e}finally{this.session?this._persistSession?.("create",this.session):this._persistSession?.("create-failed",void 0)}}_addAuthHeader(e){return!e.authorization&&this.session?.accessJwt?{...e,authorization:`Bearer ${this.session.accessJwt}`}:e}async _fetch(e,t,r,o){if(!zl.fetch)throw new Error("AtpAgent fetch() method not configured");await this._refreshSessionPromise;let i=await zl.fetch(e,t,this._addAuthHeader(r),o);return Fl(i,["ExpiredToken"])&&this.session?.refreshJwt&&(await this._refreshSession(),i=await zl.fetch(e,t,this._addAuthHeader(r),o)),i}async _refreshSession(){if(this._refreshSessionPromise)return this._refreshSessionPromise;this._refreshSessionPromise=this._refreshSessionInner();try{await this._refreshSessionPromise}finally{this._refreshSessionPromise=void 0}}async _refreshSessionInner(){if(!zl.fetch)throw new Error("AtpAgent fetch() method not configured");if(!this.session?.refreshJwt)return;const e=new URL(this.service.origin);e.pathname="/xrpc/com.atproto.server.refreshSession";const t=await zl.fetch(e.toString(),"POST",{authorization:`Bearer ${this.session.refreshJwt}`},void 0);Fl(t,["ExpiredToken","InvalidToken"])?(this.session=void 0,this._persistSession?.("expired",void 0)):function(e,t){try{return e.xrpc.lex.assertValidXrpcOutput("com.atproto.server.refreshSession",t),!0}catch{return!1}}(this._baseClient,t.body)&&(this.session={accessJwt:t.body.accessJwt,refreshJwt:t.body.refreshJwt,handle:t.body.handle,did:t.body.did},this._persistSession?.("update",this.session))}},Gl=zl;function Fl(e,t){return 400===e.status&&(r=e.body,!!vi.safeParse(r).success&&"string"==typeof e.body.error&&t.includes(e.body.error));var r}Gl.fetch=Ti;var Kl=new TextEncoder,Wl=new TextDecoder,Hl=class{constructor(e){this.utf16=e,this.utf8=Kl.encode(e)}get length(){return this.utf8.byteLength}get graphemeLength(){return this._graphemeLen||(this._graphemeLen=Jr(this.utf16)),this._graphemeLen}slice(e,t){return Wl.decode(this.utf8.slice(e,t))}utf16IndexToUtf8Index(e){return Kl.encode(this.utf16.slice(0,e)).byteLength}toString(){return this.utf16}},Jl=/[\r\n]([\u00AD\u2060\u200D\u200C\u200B\s]*[\r\n]){2,}/,Xl="\n\n";function Ql(e,t){return t.cleanNewlines&&(e=function(e,t,r){let o=(e=e.clone()).unicodeText.utf16.match(t);for(;o&&void 0!==o.index;){const i=e.unicodeText,s=e.unicodeText.utf16IndexToUtf8Index(o.index),a=s+new Hl(o[0]).length;if(e.delete(s,a),e.unicodeText.utf16===i.utf16)break;e.insert(s,r),o=e.unicodeText.utf16.match(t)}return e}(e,Jl,Xl)),e}var Yl=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermÃ¶gensberater","vermÃ¶gensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ÎµÎ»","ÎµÏ…","Ð±Ð³","Ð±ÐµÐ»","Ð´ÐµÑ‚Ð¸","ÐµÑŽ","ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº","ÐºÐ¾Ð¼","Ð¼ÐºÐ´","Ð¼Ð¾Ð½","Ð¼Ð¾ÑÐºÐ²Ð°","Ð¾Ð½Ð»Ð°Ð¹Ð½","Ð¾Ñ€Ð³","Ñ€ÑƒÑ","Ñ€Ñ„","ÑÐ°Ð¹Ñ‚","ÑÑ€Ð±","ÑƒÐºÑ€","Ò›Ð°Ð·","Õ°Õ¡Õµ","×™×©×¨××œ","×§×•×","Ø§Ø¨ÙˆØ¸Ø¨ÙŠ","Ø§ØªØµØ§Ù„Ø§Øª","Ø§Ø±Ø§Ù…ÙƒÙˆ","Ø§Ù„Ø§Ø±Ø¯Ù†","Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†","Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±","Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©","Ø§Ù„Ø¹Ù„ÙŠØ§Ù†","Ø§Ù„Ù…ØºØ±Ø¨","Ø§Ù…Ø§Ø±Ø§Øª","Ø§ÛŒØ±Ø§Ù†","Ø¨Ø§Ø±Øª","Ø¨Ø§Ø²Ø§Ø±","Ø¨ÙŠØªÙƒ","Ø¨Ú¾Ø§Ø±Øª","ØªÙˆÙ†Ø³","Ø³ÙˆØ¯Ø§Ù†","Ø³ÙˆØ±ÙŠØ©","Ø´Ø¨ÙƒØ©","Ø¹Ø±Ø§Ù‚","Ø¹Ø±Ø¨","Ø¹Ù…Ø§Ù†","ÙÙ„Ø³Ø·ÙŠÙ†","Ù‚Ø·Ø±","ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ","ÙƒÙˆÙ…","Ù…ØµØ±","Ù…Ù„ÙŠØ³ÙŠØ§","Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§","Ù…ÙˆÙ‚Ø¹","Ù‡Ù…Ø±Ø§Ù‡","Ù¾Ø§Ú©Ø³ØªØ§Ù†","Ú€Ø§Ø±Øª","à¤•à¥‰à¤®","à¤¨à¥‡à¤Ÿ","à¤­à¤¾à¤°à¤¤","à¤­à¤¾à¤°à¤¤à¤®à¥","à¤­à¤¾à¤°à¥‹à¤¤","à¤¸à¤‚à¤—à¤ à¤¨","à¦¬à¦¾à¦‚à¦²à¦¾","à¦­à¦¾à¦°à¦¤","à¦­à¦¾à§°à¦¤","à¨­à¨¾à¨°à¨¤","àª­àª¾àª°àª¤","à¬­à¬¾à¬°à¬¤","à®‡à®¨à¯à®¤à®¿à®¯à®¾","à®‡à®²à®™à¯à®•à¯ˆ","à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯","à°­à°¾à°°à°¤à±","à²­à²¾à²°à²¤","à´­à´¾à´°à´¤à´‚","à¶½à¶‚à¶šà·","à¸„à¸­à¸¡","à¹„à¸—à¸¢","àº¥àº²àº§","áƒ’áƒ”","ã¿ã‚“ãª","ã‚¢ãƒžã‚¾ãƒ³","ã‚¯ãƒ©ã‚¦ãƒ‰","ã‚°ãƒ¼ã‚°ãƒ«","ã‚³ãƒ ","ã‚¹ãƒˆã‚¢","ã‚»ãƒ¼ãƒ«","ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³","ãƒã‚¤ãƒ³ãƒˆ","ä¸–ç•Œ","ä¸­ä¿¡","ä¸­å›½","ä¸­åœ‹","ä¸­æ–‡ç½‘","äºšé©¬é€Š","ä¼ä¸š","ä½›å±±","ä¿¡æ¯","å¥åº·","å…«å¦","å…¬å¸","å…¬ç›Š","å°æ¹¾","å°ç£","å•†åŸŽ","å•†åº—","å•†æ ‡","å˜‰é‡Œ","å˜‰é‡Œå¤§é…’åº—","åœ¨çº¿","å¤§æ‹¿","å¤©ä¸»æ•™","å¨±ä¹","å®¶é›»","å¹¿ä¸œ","å¾®åš","æ…ˆå–„","æˆ‘çˆ±ä½ ","æ‰‹æœº","æ‹›è˜","æ”¿åŠ¡","æ”¿åºœ","æ–°åŠ å¡","æ–°é—»","æ—¶å°š","æ›¸ç±","æœºæž„","æ·¡é©¬é”¡","æ¸¸æˆ","æ¾³é–€","ç‚¹çœ‹","ç§»åŠ¨","ç»„ç»‡æœºæž„","ç½‘å€","ç½‘åº—","ç½‘ç«™","ç½‘ç»œ","è”é€š","è°·æ­Œ","è´­ç‰©","é€šè²©","é›†å›¢","é›»è¨Šç›ˆç§‘","é£žåˆ©æµ¦","é£Ÿå“","é¤åŽ…","é¦™æ ¼é‡Œæ‹‰","é¦™æ¸¯","ë‹·ë„·","ë‹·ì»´","ì‚¼ì„±","í•œêµ­"];function eu(e){let t;const r=[];{const o=/(^|\s|\()(@)([a-zA-Z0-9.-]+)(\b)/g;for(;t=o.exec(e.utf16);){if(!tu(t[3])&&!t[3].endsWith(".test"))continue;const o=e.utf16.indexOf(t[3],t.index)-1;r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(o),byteEnd:e.utf16IndexToUtf8Index(o+t[3].length+1)},features:[{$type:"app.bsky.richtext.facet#mention",did:t[3]}]})}}{const o=/(^|\s|\()((https?:\/\/[\S]+)|((?<domain>[a-z][a-z0-9]*(\.[a-z0-9]+)+)[\S]*))/gim;for(;t=o.exec(e.utf16);){let o=t[2];if(!o.startsWith("http")){const e=t.groups?.domain;if(!e||!tu(e))continue;o=`https://${o}`}const i=e.utf16.indexOf(t[2],t.index),s={start:i,end:i+t[2].length};/[.,;!?]$/.test(o)&&(o=o.slice(0,-1),s.end--),/[)]$/.test(o)&&!o.includes("(")&&(o=o.slice(0,-1),s.end--),r.push({index:{byteStart:e.utf16IndexToUtf8Index(s.start),byteEnd:e.utf16IndexToUtf8Index(s.end)},features:[{$type:"app.bsky.richtext.facet#link",uri:o}]})}}return r.length>0?r:void 0}function tu(e){return!!Yl.find((t=>{const r=e.lastIndexOf(t);return-1!==r&&"."===e.charAt(r-1)&&r===e.length-t.length}))}var ru=class{constructor(e,t){this.text=e,this.facet=t}get link(){const e=this.facet?.features.find(nl.isLink);if(nl.isLink(e))return e}isLink(){return!!this.link}get mention(){const e=this.facet?.features.find(nl.isMention);if(nl.isMention(e))return e}isMention(){return!!this.mention}},ou=class{constructor(e,t){this.unicodeText=new Hl(e.text),this.facets=e.facets,!this.facets?.length&&e.entities?.length&&(this.facets=function(e,t){const r=[];for(const o of t)"link"===o.type?r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(o.index.start),byteEnd:e.utf16IndexToUtf8Index(o.index.end)},features:[{$type:"app.bsky.richtext.facet#link",uri:o.value}]}):"mention"===o.type&&r.push({$type:"app.bsky.richtext.facet",index:{byteStart:e.utf16IndexToUtf8Index(o.index.start),byteEnd:e.utf16IndexToUtf8Index(o.index.end)},features:[{$type:"app.bsky.richtext.facet#mention",did:o.value}]});return r}(this.unicodeText,e.entities)),this.facets&&this.facets.sort(iu),t?.cleanNewlines&&Ql(this,{cleanNewlines:!0}).copyInto(this)}get text(){return this.unicodeText.toString()}get length(){return this.unicodeText.length}get graphemeLength(){return this.unicodeText.graphemeLength}clone(){return new ou({text:this.unicodeText.utf16,facets:su(this.facets)})}copyInto(e){e.unicodeText=this.unicodeText,e.facets=su(this.facets)}*segments(){const e=this.facets||[];if(!e.length)return void(yield new ru(this.unicodeText.utf16));let t=0,r=0;do{const o=e[r];if(t<o.index.byteStart)yield new ru(this.unicodeText.slice(t,o.index.byteStart));else if(t>o.index.byteStart){r++;continue}if(o.index.byteStart<o.index.byteEnd){const e=this.unicodeText.slice(o.index.byteStart,o.index.byteEnd);e.trim()?yield new ru(e,o):yield new ru(e)}t=o.index.byteEnd,r++}while(r<e.length);t<this.unicodeText.length&&(yield new ru(this.unicodeText.slice(t,this.unicodeText.length)))}insert(e,t){if(this.unicodeText=new Hl(this.unicodeText.slice(0,e)+t+this.unicodeText.slice(e)),!this.facets?.length)return this;const r=t.length;for(const t of this.facets)e<=t.index.byteStart?(t.index.byteStart+=r,t.index.byteEnd+=r):e>=t.index.byteStart&&e<t.index.byteEnd&&(t.index.byteEnd+=r);return this}delete(e,t){if(this.unicodeText=new Hl(this.unicodeText.slice(0,e)+this.unicodeText.slice(t)),!this.facets?.length)return this;const r=t-e;for(const o of this.facets)e<=o.index.byteStart&&t>=o.index.byteEnd?(o.index.byteStart=0,o.index.byteEnd=0):e>o.index.byteEnd||(e>o.index.byteStart&&e<=o.index.byteEnd&&t>o.index.byteEnd?o.index.byteEnd=e:e>=o.index.byteStart&&t<=o.index.byteEnd?o.index.byteEnd-=r:e<o.index.byteStart&&t>=o.index.byteStart&&t<=o.index.byteEnd?(o.index.byteStart=e,o.index.byteEnd-=r):t<o.index.byteStart&&(o.index.byteStart-=r,o.index.byteEnd-=r));return this.facets=this.facets.filter((e=>e.index.byteStart<e.index.byteEnd)),this}async detectFacets(e){if(this.facets=eu(this.unicodeText),this.facets){for(const t of this.facets)for(const r of t.features)if(nl.isMention(r)){const t=await e.resolveHandle({handle:r.did}).catch((e=>{})).then((e=>e?.data.did));r.did=t||""}this.facets.sort(iu)}}detectFacetsWithoutResolution(){this.facets=eu(this.unicodeText),this.facets&&this.facets.sort(iu)}},iu=(e,t)=>e.index.byteStart-t.index.byteStart;function su(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}var au=class extends Gl{constructor(){super(...arguments),this.getTimeline=(e,t)=>this.api.app.bsky.feed.getTimeline(e,t),this.getAuthorFeed=(e,t)=>this.api.app.bsky.feed.getAuthorFeed(e,t),this.getPostThread=(e,t)=>this.api.app.bsky.feed.getPostThread(e,t),this.getPost=e=>this.api.app.bsky.feed.post.get(e),this.getPosts=(e,t)=>this.api.app.bsky.feed.getPosts(e,t),this.getLikes=(e,t)=>this.api.app.bsky.feed.getLikes(e,t),this.getRepostedBy=(e,t)=>this.api.app.bsky.feed.getRepostedBy(e,t),this.getFollows=(e,t)=>this.api.app.bsky.graph.getFollows(e,t),this.getFollowers=(e,t)=>this.api.app.bsky.graph.getFollowers(e,t),this.getProfile=(e,t)=>this.api.app.bsky.actor.getProfile(e,t),this.getProfiles=(e,t)=>this.api.app.bsky.actor.getProfiles(e,t),this.getSuggestions=(e,t)=>this.api.app.bsky.actor.getSuggestions(e,t),this.searchActors=(e,t)=>this.api.app.bsky.actor.searchActors(e,t),this.searchActorsTypeahead=(e,t)=>this.api.app.bsky.actor.searchActorsTypeahead(e,t),this.listNotifications=(e,t)=>this.api.app.bsky.notification.listNotifications(e,t),this.countUnreadNotifications=(e,t)=>this.api.app.bsky.notification.getUnreadCount(e,t)}get app(){return this.api.app}async post(e){if(!this.session)throw new Error("Not logged in");return e.createdAt=e.createdAt||(new Date).toISOString(),this.api.app.bsky.feed.post.create({repo:this.session.did},e)}async deletePost(e){if(!this.session)throw new Error("Not logged in");const t=new no(e);return await this.api.app.bsky.feed.post.delete({repo:t.hostname,rkey:t.rkey})}async like(e,t){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.feed.like.create({repo:this.session.did},{subject:{uri:e,cid:t},createdAt:(new Date).toISOString()})}async deleteLike(e){if(!this.session)throw new Error("Not logged in");const t=new no(e);return await this.api.app.bsky.feed.like.delete({repo:t.hostname,rkey:t.rkey})}async repost(e,t){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.feed.repost.create({repo:this.session.did},{subject:{uri:e,cid:t},createdAt:(new Date).toISOString()})}async deleteRepost(e){if(!this.session)throw new Error("Not logged in");const t=new no(e);return await this.api.app.bsky.feed.repost.delete({repo:t.hostname,rkey:t.rkey})}async follow(e){if(!this.session)throw new Error("Not logged in");return await this.api.app.bsky.graph.follow.create({repo:this.session.did},{subject:e,createdAt:(new Date).toISOString()})}async deleteFollow(e){if(!this.session)throw new Error("Not logged in");const t=new no(e);return await this.api.app.bsky.graph.follow.delete({repo:t.hostname,rkey:t.rkey})}async upsertProfile(e){if(!this.session)throw new Error("Not logged in");let t=5;for(;t>=0;){const r=await this.com.atproto.repo.getRecord({repo:this.session.did,collection:"app.bsky.actor.profile",rkey:"self"}).catch((e=>{})),o=await e(r?.data.value);o&&(o.$type="app.bsky.actor.profile");const i=Lp.validateRecord(o);if(!i.success)throw i.error;try{await this.com.atproto.repo.putRecord({repo:this.session.did,collection:"app.bsky.actor.profile",rkey:"self",record:o,swapRecord:r?.data.cid||null})}catch(e){if(t>0&&e instanceof Ms.InvalidSwapError){t--;continue}throw e}break}}async mute(e){return this.api.app.bsky.graph.muteActor({actor:e})}async unmute(e){return this.api.app.bsky.graph.unmuteActor({actor:e})}async updateSeenNotifications(e){return e=e||(new Date).toISOString(),this.api.app.bsky.notification.updateSeen({seenAt:e})}}}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=window.wp.element,t=window.wp.domReady,o=r.n(t),i=window.wp.components,s=r(890),a=window.wp.data,n=window.wp.coreData;function c(){return(0,e.createElement)("div",null,(0,e.createElement)("p",null,"You need to add these constants to ",(0,e.createElement)("code",null,"wp-config.php"),". If you don't know what that means, this plugin isn't for you, yet."),(0,e.createElement)("pre",null,"define( 'WPOASTER_LOGIN',    'yourhandle.bsky.social' );",(0,e.createElement)("br",null),"define( 'WPOASTER_PASSWORD', 'Use an App Password!' );"))}let p;const d=()=>window._wpoasterLogin||{};async function l(){if(p)return p;const e=new s.BskyAgent({service:"https://bsky.social/"});return await e.login(d()),p=e,p}const u=()=>{const[t,r]=(0,e.useState)(),[o,i]=(0,e.useState)();if((0,e.useEffect)((()=>{l().then((e=>{r(e.service),e.getProfile({actor:e.session.did}).then((e=>i(e.data)))}))}),[]),!o)return(0,e.createElement)("div",null,"Loading Profile...");const{avatar:s,displayName:a,handle:n}=o,c=`@${n}`;return(0,e.createElement)("div",{className:"bsky-profile",style:{margin:"1em 0"}},(0,e.createElement)("img",{src:s,alt:n,title:c,width:16,height:16}),"Poasting as ",c," to ",t.host)},m=()=>{const t=d(),r=!!(t.password&&t.password.length&&t.identifier&&t.identifier.length),[o,s]=(0,e.useState)(""),p=o.length>300;return r?(0,e.createElement)("div",{className:"wpoaster-block"},(0,e.createElement)(i.TextareaControl,{label:"WPoast",value:o,onChange:e=>s(e)}),(0,e.createElement)(u,null),(0,e.createElement)(i.Button,{isPrimary:!0,disabled:p,onClick:()=>(e=>{(async function(e){const{saveEntityRecord:t}=(0,a.dispatch)(n.store),r=e.length>=140?e.substring(0,140)+"...":e;await t("postType","post",{title:r,content:e,status:"publish"}),async function(e){(await l()).post({text:e,createdAt:(new Date).toISOString()})}(e)})(e),s("")})(o)},"WPoast It!")," "+o.length," / ",300," chars"):(0,e.createElement)("div",{className:"wpoaster-block wpoaster-help"},(0,e.createElement)(c,null))};o()((()=>{document.querySelectorAll(".wpoaster-block").forEach((t=>{(0,e.render)((0,e.createElement)(m,null),t)}))}))}()}();